{"version":3,"sources":["../src/extractors/base.ts","../src/extractors/vue-extractor.ts","../src/extractors/js-extractor.ts","../src/config.ts","../src/extractors/index.ts","../src/translators/base.ts","../src/translators/google-translator.ts","../src/translators/openai-translator.ts","../src/translators/deepl-translator.ts","../src/translators/baidu-translator.ts","../src/translators/glm-translator.ts","../src/translators/index.ts","../src/utils/index.ts"],"sourcesContent":["/**\r\n * Base Extractor Class\r\n * All extractors should extend this class\r\n */\r\n\r\nexport interface ExtractionResult {\r\n  text: string\r\n  line: number\r\n  column: number\r\n  type?: 'template' | 'script' | 'style'\r\n  context?: string\r\n}\r\n\r\nexport interface ExtractorOptions {\r\n  include?: string[]\r\n  exclude?: string[]\r\n  useContext?: boolean\r\n  maxLength?: number\r\n  allowMixed?: boolean\r\n  allowPunctuation?: boolean\r\n}\r\n\r\nexport abstract class BaseExtractor {\r\n  protected options: ExtractorOptions\r\n\r\n  constructor(options: ExtractorOptions = {}) {\r\n    this.options = {\r\n      include: ['src/**/*.{vue,js,ts,jsx,tsx}'],\r\n      exclude: ['node_modules/**'],\r\n      useContext: false,\r\n      maxLength: 20,           // é»˜è®¤æœ€å¤§20ä¸ªå­—ç¬¦\r\n      allowMixed: false,       // ä¸å…è®¸ä¸­è‹±æ··åˆ\r\n      allowPunctuation: false, // ä¸å…è®¸æ ‡ç‚¹ç¬¦å·\r\n      ...options\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Extract Chinese text from file content\r\n   * @param filePath - Absolute path to the file\r\n   * @param content - File content\r\n   * @returns Array of extraction results\r\n   */\r\n  abstract extract(filePath: string, content: string): Promise<ExtractionResult[]> | ExtractionResult[]\r\n\r\n  /**\r\n   * Check if this extractor supports the given file\r\n   * @param filePath - Absolute path to the file\r\n   * @returns true if this extractor can handle the file\r\n   */\r\n  abstract supports(filePath: string): boolean\r\n\r\n  /**\r\n   * Check if text contains Chinese characters\r\n   * @param text - Text to check\r\n   * @returns true if text contains Chinese\r\n   */\r\n  protected hasChinese(text: string): boolean {\r\n    return /[\\u4e00-\\u9fa5]/.test(text)\r\n  }\r\n\r\n  /**\r\n   * Check if text should be extracted based on filtering rules\r\n   * @param text - Text to check\r\n   * @returns true if text should be extracted\r\n   */\r\n  protected shouldExtract(text: string): boolean {\r\n    // å¿…é¡»åŒ…å«ä¸­æ–‡\r\n    if (!this.hasChinese(text)) {\r\n      return false\r\n    }\r\n\r\n    const normalized = text.trim()\r\n\r\n    // æ£€æŸ¥é•¿åº¦ï¼ˆåªè®¡ç®—ä¸­æ–‡å­—ç¬¦ï¼‰\r\n    const chineseChars = normalized.match(/[\\u4e00-\\u9fa5]/g) || []\r\n    if (chineseChars.length > (this.options.maxLength || 20)) {\r\n      return false\r\n    }\r\n\r\n    // æ£€æŸ¥ä¸­è‹±æ··åˆ\r\n    if (!this.options.allowMixed) {\r\n      const hasEnglish = /[a-zA-Z]/.test(normalized)\r\n      const hasChinese = /[\\u4e00-\\u9fa5]/.test(normalized)\r\n      if (hasEnglish && hasChinese) {\r\n        return false\r\n      }\r\n    }\r\n\r\n    // æ£€æŸ¥æ ‡ç‚¹ç¬¦å·ï¼ˆä»»ä½•æ ‡ç‚¹ç¬¦å·éƒ½ä¸å…è®¸ï¼Œé™¤éæ˜ç¡®å…è®¸ï¼‰\r\n    if (!this.options.allowPunctuation) {\r\n      // æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•æ ‡ç‚¹ç¬¦å·ï¼ˆåŒ…æ‹¬ä¸­æ–‡å’Œè‹±æ–‡æ ‡ç‚¹ï¼‰\r\n      const hasPunctuation = /[,\\.\\!?;:'\"~@#\\$%\\^&\\*\\(\\)\\[\\]{}|\\\\\\/\\+\\-=<>]/.test(normalized) ||\r\n        /[\\u3002\\uff0c\\u3001\\uff1f\\uff01\\uff1b\\uff1a\\u201c\\u201d\\u2018\\u2019\\uff08uff09\\u300a\\u300b\\uff1c\\uff5e\\uff5f\\u2026\\u2014\\u2022\\u25cf\\u25cb]/.test(normalized)\r\n\r\n      if (hasPunctuation) {\r\n        return false\r\n      }\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Remove whitespace and normalize text\r\n   * @param text - Text to normalize\r\n   * @returns Normalized text\r\n   */\r\n  protected normalizeText(text: string): string {\r\n    return text.trim().replace(/\\s+/g, ' ')\r\n  }\r\n}\r\n","/**\r\n * Vue Single File Component Extractor\r\n * Uses @vue/compiler-sfc to parse .vue files\r\n */\r\n\r\nimport { parse, SFCDescriptor } from '@vue/compiler-sfc'\r\nimport { BaseExtractor, ExtractionResult, ExtractorOptions } from './base.js'\r\n\r\nexport class VueExtractor extends BaseExtractor {\r\n  constructor(options: ExtractorOptions = {}) {\r\n    super(options)\r\n  }\r\n\r\n  supports(filePath: string): boolean {\r\n    return filePath.endsWith('.vue')\r\n  }\r\n\r\n  async extract(filePath: string, content: string): Promise<ExtractionResult[]> {\r\n    const results: ExtractionResult[] = []\r\n\r\n    try {\r\n      const { descriptor, errors } = parse(content)\r\n\r\n      if (errors && errors.length > 0) {\r\n        console.warn(`Failed to parse Vue file: ${filePath}`, errors)\r\n        return results\r\n      }\r\n\r\n      // Extract from template\r\n      if (descriptor.template) {\r\n        const templateTexts = this.extractFromTemplate(descriptor.template.ast)\r\n        results.push(...templateTexts)\r\n      }\r\n\r\n      // Extract from script\r\n      if (descriptor.script || descriptor.scriptSetup) {\r\n        const scriptContent = descriptor.script?.content || descriptor.scriptSetup?.content || ''\r\n        const scriptTexts = this.extractFromScript(scriptContent, 'script')\r\n        results.push(...scriptTexts)\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error(`Error processing Vue file: ${filePath}`, error)\r\n    }\r\n\r\n    return results\r\n  }\r\n\r\n  /**\r\n   * Extract Chinese text from template AST\r\n   */\r\n  private extractFromTemplate(templateAst: any): ExtractionResult[] {\r\n    const texts: ExtractionResult[] = []\r\n\r\n    const traverse = (node: any) => {\r\n      if (!node) return\r\n\r\n      // Extract text nodes\r\n      if (node.type === 2 && this.shouldExtract(node.content)) {\r\n        // type 2 is TEXT type in Vue compiler\r\n        texts.push({\r\n          text: this.normalizeText(node.content),\r\n          line: node.loc?.start?.line || 0,\r\n          column: node.loc?.start?.column || 0,\r\n          type: 'template'\r\n        })\r\n      }\r\n\r\n      // Extract Chinese from attributes\r\n      if (node.type === 1 && node.props) {\r\n        // type 1 is ELEMENT type\r\n        node.props.forEach((prop: any) => {\r\n          if (prop.type === 6 && this.shouldExtract(prop.value?.content)) {\r\n            // type 6 is ATTRIBUTE type\r\n            texts.push({\r\n              text: prop.value.content,\r\n              line: prop.loc?.start?.line || 0,\r\n              column: prop.loc?.start?.column || 0,\r\n              type: 'template',\r\n              context: `attribute: ${prop.name}`\r\n            })\r\n          }\r\n        })\r\n      }\r\n\r\n      // Recursively traverse children\r\n      if (node.children) {\r\n        node.children.forEach(traverse)\r\n      }\r\n    }\r\n\r\n    traverse(templateAst)\r\n    return texts\r\n  }\r\n\r\n  /**\r\n   * Extract Chinese text from script content (using regex as fallback)\r\n   */\r\n  private extractFromScript(scriptContent: string, source: string): ExtractionResult[] {\r\n    const texts: ExtractionResult[] = []\r\n\r\n    if (!scriptContent) return texts\r\n\r\n    // Match string literals with Chinese\r\n    const patterns = [\r\n      /['\"`]([^'\"`]*[\\u4e00-\\u9fa5]+[^'\"`]*)['\"`]/g\r\n    ]\r\n\r\n    patterns.forEach(pattern => {\r\n      let match: RegExpExecArray | null\r\n      while ((match = pattern.exec(scriptContent)) !== null) {\r\n        const text = match[1]\r\n        if (this.shouldExtract(text) && text.trim().length > 0) {\r\n          texts.push({\r\n            text: this.normalizeText(text),\r\n            line: 0,\r\n            column: 0,\r\n            type: 'script'\r\n          })\r\n        }\r\n      }\r\n    })\r\n\r\n    return texts\r\n  }\r\n}\r\n\r\n// Export convenience function for backward compatibility\r\nexport function extractFromVueFile(filePath: string, content: string): ExtractionResult[] {\r\n  const extractor = new VueExtractor()\r\n  return extractor.extract(filePath, content) as any\r\n}\r\n","/**\r\n * JS/TS/JSX/TSX File Extractor\r\n * Supports Babel Parser (with OXC planned for future)\r\n */\r\n\r\nimport { parse, ParserOptions } from '@babel/parser'\r\nimport traverse from '@babel/traverse'\r\nimport { BaseExtractor, ExtractionResult, ExtractorOptions } from './base.js'\r\n\r\nexport interface JSExtractorOptions extends ExtractorOptions {\r\n  useBabel?: boolean\r\n  babelPlugins?: ParserOptions['plugins']\r\n}\r\n\r\nexport class JSExtractor extends BaseExtractor {\r\n  protected options: JSExtractorOptions\r\n\r\n  constructor(options: JSExtractorOptions = {}) {\r\n    super(options)\r\n    this.options = {\r\n      useBabel: true,\r\n      babelPlugins: [\r\n        'jsx',\r\n        'typescript'\r\n      ],\r\n      ...options\r\n    }\r\n  }\r\n\r\n  supports(filePath: string): boolean {\r\n    return /\\.(js|ts|jsx|tsx)$/.test(filePath)\r\n  }\r\n\r\n  async extract(filePath: string, content: string): Promise<ExtractionResult[]> {\r\n    if (this.options.useBabel) {\r\n      return this.extractWithBabel(content, filePath)\r\n    }\r\n    return this.extractWithRegex(content)\r\n  }\r\n\r\n  /**\r\n   * Extract Chinese text using Babel AST traversal\r\n   */\r\n  private extractWithBabel(content: string, filePath: string): ExtractionResult[] {\r\n    const results: ExtractionResult[] = []\r\n\r\n    try {\r\n      const ast = parse(content, {\r\n        sourceType: 'module',\r\n        plugins: this.options.babelPlugins\r\n      })\r\n\r\n      // Handle ESM default export\r\n      const traverseFn = (traverse as any).default || traverse\r\n\r\n      traverseFn(ast, {\r\n        // String literals\r\n        StringLiteral: (path: any) => {\r\n          const { node } = path\r\n          if (this.shouldExtract(node.value)) {\r\n            results.push({\r\n              text: node.value,\r\n              line: node.loc?.start?.line || 0,\r\n              column: node.loc?.start?.column || 0,\r\n              type: 'script'\r\n            })\r\n          }\r\n        },\r\n\r\n        // Template strings\r\n        TemplateElement: (path: any) => {\r\n          const { node } = path\r\n          if (this.shouldExtract(node.value.raw)) {\r\n            results.push({\r\n              text: this.normalizeText(node.value.raw),\r\n              line: node.loc?.start?.line || 0,\r\n              column: node.loc?.start?.column || 0,\r\n              type: 'script'\r\n            })\r\n          }\r\n        }\r\n      })\r\n\r\n    } catch (error) {\r\n      // AST parsing failed, fallback to regex\r\n      const errorMessage = error instanceof Error ? error.message : String(error)\r\n      if (process.env.VUE_I18N_VERBOSE === 'true') {\r\n        console.warn(`AST parsing failed for ${filePath}: ${errorMessage}`)\r\n      }\r\n      // Silently use regex as fallback\r\n      return this.extractWithRegex(content)\r\n    }\r\n\r\n    return results\r\n  }\r\n\r\n  /**\r\n   * Regex matching (fallback method)\r\n   */\r\n  private extractWithRegex(content: string): ExtractionResult[] {\r\n    const results: ExtractionResult[] = []\r\n\r\n    // Match Chinese in various scenarios\r\n    const patterns = [\r\n      // Single quoted strings\r\n      /'([^']*[\\u4e00-\\u9fa5]+[^']*)'/g,\r\n      // Double quoted strings\r\n      /\"([^\"]*[\\u4e00-\\u9fa5]+[^\"]*)\"/g,\r\n      // Template strings\r\n      /`([^`]*[\\u4e00-\\u9fa5]+[^`]*)`/g,\r\n      // JSX text\r\n      />([^<]*[\\u4e00-\\u9fa5]+[^<]*)</g\r\n    ]\r\n\r\n    patterns.forEach(pattern => {\r\n      let match: RegExpExecArray | null\r\n      while ((match = pattern.exec(content)) !== null) {\r\n        const text = match[1].trim()\r\n        if (this.shouldExtract(text) && text.length > 0) {\r\n          results.push({\r\n            text,\r\n            line: 0,\r\n            column: 0,\r\n            type: 'script'\r\n          })\r\n        }\r\n      }\r\n    })\r\n\r\n    return results\r\n  }\r\n}\r\n\r\n// Export convenience function for backward compatibility\r\nexport function extractFromJSFile(filePath: string, content: string): ExtractionResult[] {\r\n  const extractor = new JSExtractor()\r\n  return extractor.extract(filePath, content) as any\r\n}\r\n","/**\r\n * Configuration Loader\r\n * Loads and merges configuration from i18n.config.js and environment variables\r\n */\r\n\r\nimport { existsSync } from 'fs'\r\nimport { readFile } from 'fs/promises'\r\nimport { join, dirname } from 'path'\r\nimport { fileURLToPath } from 'url'\r\n\r\nconst __filename = fileURLToPath(import.meta.url)\r\nconst __dirname = dirname(__filename)\r\n\r\nexport interface I18nConfig {\r\n  // File patterns\r\n  include: string[]\r\n  exclude: string[]\r\n\r\n  // Directories\r\n  localesDir: string\r\n  cacheDir: string\r\n\r\n  // Translation\r\n  translateService: 'google' | 'deepl' | 'openai' | 'baidu' | 'glm'\r\n  targetLanguages: string[]\r\n  incremental: boolean\r\n\r\n  // ========== ç¿»è¯‘å™¨é…ç½®ï¼ˆå¿…éœ€ï¼‰ ==========\r\n  translator: {\r\n    google?: {\r\n      apiKey?: string\r\n      useFreeAPI?: boolean\r\n    }\r\n    openai?: {\r\n      apiKey?: string\r\n      model?: string\r\n      baseUrl?: string\r\n      temperature?: number\r\n      maxTokens?: number\r\n    }\r\n    glm?: {\r\n      apiKey?: string\r\n      model?: string\r\n      baseUrl?: string\r\n      temperature?: number\r\n      top_p?: number\r\n    }\r\n    deepl?: {\r\n      apiKey?: string\r\n      apiUrl?: string\r\n    }\r\n    baidu?: {\r\n      appId?: string\r\n      secret?: string\r\n    }\r\n  }\r\n\r\n  // Extraction filters\r\n  extractMaxLength?: number       // æœ€å¤§ä¸­æ–‡é•¿åº¦ï¼ˆé»˜è®¤20ï¼‰\r\n  extractAllowMixed?: boolean     // æ˜¯å¦å…è®¸ä¸­è‹±æ··åˆï¼ˆé»˜è®¤falseï¼‰\r\n  extractAllowPunctuation?: boolean // æ˜¯å¦å…è®¸æ ‡ç‚¹ç¬¦å·ï¼ˆé»˜è®¤falseï¼‰\r\n\r\n  // Logging\r\n  verbose: boolean\r\n}\r\n\r\nconst defaultConfig: I18nConfig = {\r\n  include: ['src/**/*.{vue,js,ts,jsx,tsx}'],\r\n  exclude: ['node_modules/**', 'dist/**'],\r\n  localesDir: 'src/locales',\r\n  cacheDir: '.i18n-cache',\r\n  translateService: 'google',\r\n  targetLanguages: ['en-US', 'ja-JP'],\r\n  incremental: true,\r\n  translator: {\r\n    google: {\r\n      useFreeAPI: true,\r\n    },\r\n  },\r\n  extractMaxLength: 20,           // é»˜è®¤æœ€å¤§20ä¸ªä¸­æ–‡å­—ç¬¦\r\n  extractAllowMixed: false,       // ä¸å…è®¸ä¸­è‹±æ··åˆ\r\n  extractAllowPunctuation: false, // ä¸å…è®¸æ ‡ç‚¹ç¬¦å·\r\n  verbose: false\r\n}\r\n\r\n/**\r\n * Load config from i18n.config.js\r\n */\r\nexport async function loadConfig(overrides: Partial<I18nConfig> = {}): Promise<I18nConfig> {\r\n  let userConfig: Partial<I18nConfig> = {}\r\n\r\n  // Try to load i18n.config.js from current working directory\r\n  const configPath = join(process.cwd(), 'i18n.config.js')\r\n\r\n  if (existsSync(configPath)) {\r\n    try {\r\n      // Using dynamic import for ES modules\r\n      const configModule = await import(`file://${configPath}`)\r\n      userConfig = configModule.default || {}\r\n    } catch (error) {\r\n      // If import fails, try to read and eval (for backward compatibility)\r\n      try {\r\n        const content = await readFile(configPath, 'utf-8')\r\n        // Note: This is a simplified approach - in production you might want\r\n        // to use a more sophisticated config loader\r\n        const fn = new Function('module', 'require', 'process', content + '\\nreturn module.exports;')({ exports: {} }, require, process)\r\n        userConfig = fn || {}\r\n      } catch (readError) {\r\n        console.warn('Failed to load config file:', readError)\r\n      }\r\n    }\r\n  }\r\n\r\n  // Merge configs with priority: overrides > user config > defaults\r\n  const merged: I18nConfig = {\r\n    ...defaultConfig,\r\n    ...userConfig,\r\n    ...overrides\r\n  }\r\n\r\n  // ========== ç¡®ä¿ç¿»è¯‘å™¨é…ç½®å®Œæ•´ ==========\r\n  // å¦‚æœç”¨æˆ·æ²¡æœ‰æä¾› translatorï¼Œä½¿ç”¨é»˜è®¤çš„ç©ºé…ç½®\r\n  if (!merged.translator) {\r\n    merged.translator = {}\r\n  }\r\n\r\n  // ä»ç¯å¢ƒå˜é‡å¡«å……ç¿»è¯‘å™¨é…ç½®\r\n  if (merged.translator.google) {\r\n    merged.translator.google = {\r\n      apiKey: merged.translator.google.apiKey || process.env.GOOGLE_API_KEY || '',\r\n      useFreeAPI: merged.translator.google.useFreeAPI ?? true,\r\n    }\r\n  }\r\n\r\n  if (merged.translator.openai) {\r\n    merged.translator.openai = {\r\n      apiKey: merged.translator.openai.apiKey || process.env.OPENAI_API_KEY || '',\r\n      model: merged.translator.openai.model || process.env.OPENAI_MODEL || 'gpt-3.5-turbo',\r\n      baseUrl: merged.translator.openai.baseUrl || process.env.OPENAI_BASE_URL || 'https://api.openai.com/v1/chat/completions',\r\n      temperature: merged.translator.openai.temperature || 0.3,\r\n      maxTokens: merged.translator.openai.maxTokens || 1000,\r\n    }\r\n  }\r\n\r\n  if (merged.translator.glm) {\r\n    merged.translator.glm = {\r\n      apiKey: merged.translator.glm.apiKey || process.env.GLM_API_KEY || '',\r\n      model: merged.translator.glm.model || process.env.GLM_MODEL || 'glm-4',\r\n      baseUrl: merged.translator.glm.baseUrl || process.env.GLM_BASE_URL || 'https://open.bigmodel.cn/api/paas/v4/chat/completions',\r\n      temperature: merged.translator.glm.temperature || 0.3,\r\n      top_p: merged.translator.glm.top_p || 0.7,\r\n    }\r\n  }\r\n\r\n  if (merged.translator.deepl) {\r\n    merged.translator.deepl = {\r\n      apiKey: merged.translator.deepl.apiKey || process.env.DEEPL_API_KEY || '',\r\n      apiUrl: merged.translator.deepl.apiUrl || process.env.DEEPL_API_URL || 'https://api-free.deepl.com/v2/translate',\r\n    }\r\n  }\r\n\r\n  if (merged.translator.baidu) {\r\n    merged.translator.baidu = {\r\n      appId: merged.translator.baidu.appId || process.env.BAIDU_APP_ID || '',\r\n      secret: merged.translator.baidu.secret || process.env.BAIDU_SECRET || '',\r\n    }\r\n  }\r\n\r\n  return merged\r\n}\r\n","/**\r\n * Extractors Module Entry Point\r\n */\r\n\r\nexport { BaseExtractor, type ExtractionResult, type ExtractorOptions } from './base.js'\r\nexport { VueExtractor, extractFromVueFile } from './vue-extractor.js'\r\nexport { JSExtractor, extractFromJSFile, type JSExtractorOptions } from './js-extractor.js'\r\n\r\n// Re-export convenience functions for backward compatibility\r\nexport async function extractChineseFromProject(options: any = {}) {\r\n  const { VueExtractor } = await import('./vue-extractor.js')\r\n  const { JSExtractor } = await import('./js-extractor.js')\r\n  const fg = (await import('fast-glob')).default\r\n  const fs = (await import('fs')).default\r\n  const path = (await import('path')).default\r\n\r\n  const {\r\n    include = ['src/**/*.{vue,js,ts,jsx,tsx}'],\r\n    exclude = ['node_modules/**'],\r\n    maxLength,\r\n    allowMixed,\r\n    allowPunctuation\r\n  } = options\r\n\r\n  // Scan all target files\r\n  const files = await fg.glob(include, { cwd: process.cwd(), ignore: exclude })\r\n\r\n  const results = {\r\n    uniqueTexts: [],\r\n    fileMap: {},\r\n    fileCount: 0,\r\n    totalOccurrences: 0\r\n  } as any\r\n\r\n  const textMap = new Map()\r\n\r\n  // åˆ›å»ºæå–å™¨æ—¶ä¼ é€’è¿‡æ»¤é€‰é¡¹\r\n  const extractorOptions = {\r\n    maxLength,\r\n    allowMixed,\r\n    allowPunctuation\r\n  }\r\n\r\n  const vueExtractor = new VueExtractor(extractorOptions)\r\n  const jsExtractor = new JSExtractor(extractorOptions)\r\n\r\n  for (const file of files) {\r\n    const filePath = path.resolve(process.cwd(), file)\r\n    const content = fs.readFileSync(filePath, 'utf-8')\r\n\r\n    let extracted: any[] = []\r\n\r\n    // Select extractor based on file type\r\n    if (file.endsWith('.vue')) {\r\n      extracted = await vueExtractor.extract(filePath, content)\r\n    } else if (/\\.(js|ts|jsx|tsx)$/.test(file)) {\r\n      extracted = await jsExtractor.extract(filePath, content)\r\n    }\r\n\r\n    if (extracted.length > 0) {\r\n      results.fileMap[file] = extracted\r\n      results.fileCount++\r\n      results.totalOccurrences += extracted.length\r\n\r\n      // Deduplicate and record file sources\r\n      extracted.forEach((item: any) => {\r\n        const key = item.text\r\n        if (!textMap.has(key)) {\r\n          textMap.set(key, {\r\n            text: key,\r\n            files: [{ file, line: item.line, column: item.column }]\r\n          })\r\n        } else {\r\n          const existing = textMap.get(key)\r\n          existing.files.push({ file, line: item.line, column: item.column })\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  results.uniqueTexts = Array.from(textMap.values())\r\n\r\n  return results\r\n}\r\n","/**\r\n * Base Translator Class\r\n * All translators should extend this class\r\n */\r\n\r\nexport interface TranslationResult {\r\n  original: string\r\n  translated: string\r\n  error?: string\r\n}\r\n\r\nexport interface TranslatorOptions {\r\n  apiKey?: string\r\n  apiUrl?: string\r\n  maxRetries?: number\r\n  timeout?: number\r\n}\r\n\r\nexport abstract class BaseTranslator {\r\n  protected options: TranslatorOptions\r\n  protected abstract supportedLanguages: string[]\r\n\r\n  constructor(options: TranslatorOptions = {}) {\r\n    this.options = {\r\n      maxRetries: 3,\r\n      timeout: 30000,\r\n      ...options\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Translate texts from source language to target language\r\n   * @param texts - Array of texts to translate\r\n   * @param from - Source language code (e.g., 'zh-CN')\r\n   * @param to - Target language code (e.g., 'en-US')\r\n   * @returns Array of translation results\r\n   */\r\n  abstract translate(texts: string[], from: string, to: string): Promise<string[]>\r\n\r\n  /**\r\n   * Validate translator configuration\r\n   * @param options - Options to validate\r\n   * @returns true if configuration is valid\r\n   * @throws Error if configuration is invalid\r\n   */\r\n  abstract validateConfig(options: TranslatorOptions): boolean\r\n\r\n  /**\r\n   * Check if language is supported\r\n   * @param language - Language code to check\r\n   * @returns true if language is supported\r\n   */\r\n  supportsLanguage(language: string): boolean {\r\n    return this.supportedLanguages.includes(language)\r\n  }\r\n\r\n  /**\r\n   * Batch translate with error handling\r\n   * @param texts - Array of texts to translate\r\n   * @param from - Source language code\r\n   * @param to - Target language code\r\n   * @param batchSize - Number of texts to translate per batch\r\n   * @returns Array of translation results with error handling\r\n   */\r\n  async batchTranslate(\r\n    texts: string[],\r\n    from: string,\r\n    to: string,\r\n    batchSize: number = 10\r\n  ): Promise<TranslationResult[]> {\r\n    const results: TranslationResult[] = []\r\n\r\n    for (let i = 0; i < texts.length; i += batchSize) {\r\n      const batch = texts.slice(i, i + batchSize)\r\n\r\n      try {\r\n        const translated = await this.translate(batch, from, to)\r\n\r\n        for (let j = 0; j < batch.length; j++) {\r\n          results.push({\r\n            original: batch[j],\r\n            translated: translated[j] || batch[j] // Fallback to original if translation fails\r\n          })\r\n        }\r\n      } catch (error) {\r\n        // On error, return original texts for this batch\r\n        for (const text of batch) {\r\n          results.push({\r\n            original: text,\r\n            translated: text,\r\n            error: error instanceof Error ? error.message : String(error)\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    return results\r\n  }\r\n\r\n  /**\r\n   * Delay execution for specified milliseconds\r\n   * @param ms - Milliseconds to delay\r\n   */\r\n  protected delay(ms: number): Promise<void> {\r\n    return new Promise(resolve => setTimeout(resolve, ms))\r\n  }\r\n}\r\n","/**\r\n * Google Translate Translator\r\n * Uses both official API and free API\r\n */\r\n\r\nimport { BaseTranslator, TranslatorOptions } from './base.js'\r\n\r\nexport interface GoogleTranslatorOptions extends TranslatorOptions {\r\n  apiKey?: string\r\n  useFreeAPI?: boolean\r\n}\r\n\r\nexport class GoogleTranslator extends BaseTranslator {\r\n  protected supportedLanguages = ['zh-CN', 'en-US', 'ja-JP', 'ko-KR', 'fr-FR', 'de-DE', 'es-ES', 'ru-RU', 'pt-BR', 'it-IT']\r\n  protected options: GoogleTranslatorOptions\r\n\r\n  private baseUrl = 'https://translation.googleapis.com/language/translate/v2'\r\n\r\n  // Google Translate uses different language codes (zh instead of zh-CN)\r\n  private languageCodeMap: Record<string, string> = {\r\n    'zh-CN': 'zh',\r\n    'en-US': 'en',\r\n    'ja-JP': 'ja',\r\n    'ko-KR': 'ko',\r\n    'fr-FR': 'fr',\r\n    'de-DE': 'de',\r\n    'es-ES': 'es',\r\n    'ru-RU': 'ru',\r\n    'pt-BR': 'pt',\r\n    'it-IT': 'it',\r\n    'zh-TW': 'zh-TW',\r\n    'ar': 'ar',\r\n    'hi': 'hi',\r\n    'th': 'th',\r\n    'vi': 'vi'\r\n  }\r\n\r\n  constructor(options: GoogleTranslatorOptions = {}) {\r\n    super(options)\r\n    this.options = {\r\n      useFreeAPI: !options.apiKey,\r\n      ...options\r\n    }\r\n  }\r\n\r\n  validateConfig(options: GoogleTranslatorOptions): boolean {\r\n    if (!options.useFreeAPI && !options.apiKey) {\r\n      throw new Error('Google Translate requires API Key when not using free API')\r\n    }\r\n    return true\r\n  }\r\n\r\n  async translate(texts: string[], from: string, to: string): Promise<string[]> {\r\n    if (texts.length === 0) {\r\n      return []\r\n    }\r\n\r\n    if (this.options.useFreeAPI) {\r\n      return this.translateWithFreeAPI(texts, from, to)\r\n    } else {\r\n      return this.translateWithAPI(texts, from, to)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Convert locale code to Google language code\r\n   */\r\n  private toGoogleLang(code: string): string {\r\n    return this.languageCodeMap[code] || code.split('-')[0]\r\n  }\r\n\r\n  /**\r\n   * Use official API (requires payment) with batch optimization\r\n   */\r\n  private async translateWithAPI(texts: string[], from: string, to: string): Promise<string[]> {\r\n    const googleFrom = this.toGoogleLang(from)\r\n    const googleTo = this.toGoogleLang(to)\r\n\r\n    const batchSize = 50 // Official API supports up to 50 texts per request\r\n    const results: string[] = []\r\n\r\n    for (let i = 0; i < texts.length; i += batchSize) {\r\n      const batch = texts.slice(i, Math.min(i + batchSize, texts.length))\r\n\r\n      const response = await fetch(`${this.baseUrl}?key=${this.options.apiKey}`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          q: batch,\r\n          source: googleFrom,\r\n          target: googleTo,\r\n          format: 'text'\r\n        })\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text()\r\n        throw new Error(`Google API error: ${response.status} ${response.statusText} - ${errorText}`)\r\n      }\r\n\r\n      const data = await response.json() as any\r\n      if (data.error) {\r\n        throw new Error(`Google API error: ${data.error.message || JSON.stringify(data.error)}`)\r\n      }\r\n\r\n      const translations = data.data?.translations || []\r\n      results.push(...translations.map((t: any) => t.translatedText))\r\n    }\r\n\r\n    return results\r\n  }\r\n\r\n  /**\r\n   * Use free Google Translate with concurrent batch optimization\r\n   */\r\n  private async translateWithFreeAPI(texts: string[], from: string, to: string): Promise<string[]> {\r\n    const googleFrom = this.toGoogleLang(from)\r\n    const googleTo = this.toGoogleLang(to)\r\n\r\n    const concurrency = 5 // å¹¶å‘æ•°é‡ï¼šä¸€æ¬¡å¤„ç† 5 ä¸ªè¯·æ±‚\r\n    const delayBetweenBatches = 50 // æ‰¹æ¬¡é—´å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰\r\n\r\n    const results: string[] = []\r\n    const errors: Array<{ text: string; error: string }> = []\r\n\r\n    console.log(`  ğŸš€ ä½¿ç”¨å¹¶å‘æ¨¡å¼ (å¹¶å‘æ•°: ${concurrency})`)\r\n\r\n    // åˆ†æ‰¹å¤„ç†ï¼Œæ¯æ‰¹å¹¶å‘æ‰§è¡Œ\r\n    for (let i = 0; i < texts.length; i += concurrency) {\r\n      const batch = texts.slice(i, Math.min(i + concurrency, texts.length))\r\n      const batchNumber = Math.floor(i / concurrency) + 1\r\n      const totalBatches = Math.ceil(texts.length / concurrency)\r\n\r\n      console.log(`  [æ‰¹æ¬¡ ${batchNumber}/${totalBatches}] æ­£åœ¨å¹¶å‘ç¿»è¯‘ ${batch.length} ä¸ªæ–‡æœ¬...`)\r\n\r\n      // å¹¶å‘ç¿»è¯‘å½“å‰æ‰¹æ¬¡\r\n      const batchPromises = batch.map((text, index) =>\r\n        this.translateSingleWithFreeAPI(text, googleFrom, googleTo)\r\n          .then(result => ({ success: true as const, result, text }))\r\n          .catch(error => ({\r\n            success: false as const,\r\n            result: text, // å¤±è´¥æ—¶ä½¿ç”¨åŸæ–‡\r\n            text,\r\n            error: error instanceof Error ? error.message : String(error)\r\n          }))\r\n      )\r\n\r\n      const batchResults = await Promise.all(batchPromises)\r\n\r\n      // å¤„ç†æ‰¹æ¬¡ç»“æœ\r\n      for (const item of batchResults) {\r\n        if (item.success) {\r\n          results.push(item.result)\r\n        } else {\r\n          errors.push({ text: item.text, error: item.error })\r\n          results.push(item.result)\r\n        }\r\n      }\r\n\r\n      // æ‰¹æ¬¡ä¹‹é—´æ·»åŠ çŸ­æš‚å»¶è¿Ÿ\r\n      if (i + concurrency < texts.length) {\r\n        await this.delay(delayBetweenBatches)\r\n      }\r\n    }\r\n\r\n    if (errors.length > 0) {\r\n      console.warn(`\\nâš ï¸  ${errors.length} ä¸ªæ–‡æœ¬ç¿»è¯‘å¤±è´¥ï¼Œå·²ä½¿ç”¨åŸæ–‡`)\r\n      errors.forEach(({ text, error }) => {\r\n        console.warn(`  - \"${text}\": ${error}`)\r\n      })\r\n    }\r\n\r\n    return results\r\n  }\r\n\r\n  /**\r\n   * Translate a single text using free API\r\n   */\r\n  private async translateSingleWithFreeAPI(text: string, from: string, to: string): Promise<string> {\r\n    const url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=${from}&tl=${to}&dt=t&q=${encodeURIComponent(text)}`\r\n\r\n    const response = await fetch(url, {\r\n      signal: AbortSignal.timeout(10000)\r\n    })\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}`)\r\n    }\r\n\r\n    const data = await response.json() as any\r\n    const translated = data[0]?.map((item: any) => item[0]).join('') || text\r\n    return translated\r\n  }\r\n\r\n  protected delay(ms: number): Promise<void> {\r\n    return new Promise(resolve => setTimeout(resolve, ms))\r\n  }\r\n}\r\n","/**\r\n * OpenAI Translator\r\n * Uses GPT models for translation, best contextual understanding\r\n */\r\n\r\nimport { BaseTranslator, TranslatorOptions } from './base.js'\r\n\r\nexport interface OpenAITranslatorOptions extends TranslatorOptions {\r\n  apiKey: string\r\n  model?: string\r\n  baseUrl?: string\r\n}\r\n\r\nexport class OpenAITranslator extends BaseTranslator {\r\n  protected supportedLanguages = ['zh-CN', 'en-US', 'ja-JP', 'ko-KR', 'fr-FR', 'de-DE', 'es-ES', 'ru-RU']\r\n  protected options: OpenAITranslatorOptions\r\n\r\n  constructor(options: OpenAITranslatorOptions) {\r\n    super(options)\r\n    this.options = {\r\n      model: 'gpt-3.5-turbo',\r\n      baseUrl: 'https://api.openai.com/v1/chat/completions',\r\n      ...options\r\n    }\r\n  }\r\n\r\n  private getBaseUrl(): string {\r\n    return this.options.baseUrl || 'https://api.openai.com/v1/chat/completions'\r\n  }\r\n\r\n  validateConfig(options: OpenAITranslatorOptions): boolean {\r\n    if (!options.apiKey) {\r\n      throw new Error('OpenAI requires API Key')\r\n    }\r\n    return true\r\n  }\r\n\r\n  async translate(texts: string[], from: string, to: string): Promise<string[]> {\r\n    const batchSize = 10\r\n    const results: string[] = []\r\n\r\n    for (let i = 0; i < texts.length; i += batchSize) {\r\n      const batch = texts.slice(i, i + batchSize)\r\n\r\n      try {\r\n        const prompt = this.buildPrompt(batch, from, to)\r\n\r\n        const response = await fetch(this.getBaseUrl(), {\r\n          method: 'POST',\r\n          headers: {\r\n            'Authorization': `Bearer ${this.options.apiKey}`,\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            model: this.options.model,\r\n            messages: [\r\n              {\r\n                role: 'system',\r\n                content: 'You are a professional translation assistant. Translate the provided text to the target language and return only the translation results without any explanation.'\r\n              },\r\n              {\r\n                role: 'user',\r\n                content: prompt\r\n              }\r\n            ],\r\n            temperature: 0.3\r\n          })\r\n        })\r\n\r\n        const data = await response.json() as { choices: Array<{ message: { content: string } }> }\r\n        const translated = data.choices[0]?.message?.content || ''\r\n        const translations = translated.split('\\n').filter((t: string) => t.trim())\r\n\r\n        results.push(...translations)\r\n\r\n      } catch (error) {\r\n        console.warn('OpenAI translation failed:', error)\r\n        results.push(...batch)\r\n      }\r\n    }\r\n\r\n    return results\r\n  }\r\n\r\n  private buildPrompt(texts: string[], from: string, to: string): string {\r\n    const langNames: Record<string, string> = {\r\n      'zh-CN': 'Chinese',\r\n      'en-US': 'English',\r\n      'ja-JP': 'Japanese',\r\n      'ko-KR': 'Korean',\r\n      'fr-FR': 'French',\r\n      'de-DE': 'German',\r\n      'es-ES': 'Spanish',\r\n      'ru-RU': 'Russian'\r\n    }\r\n\r\n    const sourceLang = langNames[from] || from\r\n    const targetLang = langNames[to] || to\r\n\r\n    const textList = texts.map((text, i) => `${i + 1}. ${text}`).join('\\n')\r\n\r\n    return `Please translate the following ${sourceLang} texts into ${targetLang}, one translation result per line:\\n\\n${textList}`\r\n  }\r\n}\r\n","/**\r\n * DeepL Translator\r\n * Best translation quality, but requires payment\r\n */\r\n\r\nimport { BaseTranslator, TranslatorOptions } from './base.js'\r\n\r\nexport interface DeepLTranslatorOptions extends TranslatorOptions {\r\n  apiKey: string\r\n  apiUrl?: string\r\n}\r\n\r\nexport class DeepLTranslator extends BaseTranslator {\r\n  protected supportedLanguages = ['zh-CN', 'en-US', 'ja-JP', 'ko-KR', 'fr-FR', 'de-DE', 'es-ES', 'ru-RU']\r\n  protected options: DeepLTranslatorOptions\r\n\r\n  constructor(options: DeepLTranslatorOptions) {\r\n    super(options)\r\n    this.options = {\r\n      apiUrl: 'https://api-free.deepl.com/v2/translate',\r\n      ...options\r\n    }\r\n  }\r\n\r\n  private getApiUrl(): string {\r\n    return this.options.apiUrl || 'https://api-free.deepl.com/v2/translate'\r\n  }\r\n\r\n  validateConfig(options: DeepLTranslatorOptions): boolean {\r\n    if (!options.apiKey) {\r\n      throw new Error('DeepL requires API Key')\r\n    }\r\n    return true\r\n  }\r\n\r\n  async translate(texts: string[], from: string, to: string): Promise<string[]> {\r\n    // DeepL supports batch translation but has text length limits\r\n    const results: string[] = []\r\n\r\n    // Process in batches (max 50 texts per batch)\r\n    const batchSize = 50\r\n    for (let i = 0; i < texts.length; i += batchSize) {\r\n      const batch = texts.slice(i, i + batchSize)\r\n\r\n      try {\r\n        const response = await fetch(this.getApiUrl(), {\r\n          method: 'POST',\r\n          headers: {\r\n            'Authorization': `DeepL-Auth-Key ${this.options.apiKey}`,\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            text: batch,\r\n            source_lang: from.toUpperCase().replace('-', '-'),\r\n            target_lang: to.toUpperCase().replace('-', '-')\r\n          })\r\n        })\r\n\r\n        const data = await response.json() as { translations: Array<{ text: string }> }\r\n        const translations = data.translations.map((t) => t.text)\r\n        results.push(...translations)\r\n\r\n      } catch (error) {\r\n        console.warn('DeepL translation failed:', error)\r\n        // Return original texts on failure\r\n        results.push(...batch)\r\n      }\r\n    }\r\n\r\n    return results\r\n  }\r\n}\r\n","/**\r\n * Baidu Translator\r\n * Large free tier\r\n */\r\n\r\nimport { createHash } from 'crypto'\r\nimport { BaseTranslator, TranslatorOptions } from './base.js'\r\n\r\nexport interface BaiduTranslatorOptions extends TranslatorOptions {\r\n  appId: string\r\n  secret: string\r\n}\r\n\r\nexport class BaiduTranslator extends BaseTranslator {\r\n  protected supportedLanguages = ['zh-CN', 'en-US', 'ja-JP', 'ko-KR', 'fr-FR', 'de-DE', 'es-ES', 'ru-RU']\r\n  protected options: BaiduTranslatorOptions\r\n  private baseUrl = 'https://fanyi-api.baidu.com/api/trans/vip/translate'\r\n\r\n  constructor(options: BaiduTranslatorOptions) {\r\n    super(options)\r\n    this.options = options\r\n  }\r\n\r\n  validateConfig(options: BaiduTranslatorOptions): boolean {\r\n    if (!options.appId || !options.secret) {\r\n      throw new Error('Baidu Translator requires appId and secret')\r\n    }\r\n    return true\r\n  }\r\n\r\n  async translate(texts: string[], from: string, to: string): Promise<string[]> {\r\n    const results: string[] = []\r\n\r\n    for (const text of texts) {\r\n      try {\r\n        const salt = Date.now()\r\n        const sign = this.generateSign(text, salt)\r\n\r\n        const url = `${this.baseUrl}?q=${encodeURIComponent(text)}&from=${from}&to=${to}&appid=${this.options.appId}&salt=${salt}&sign=${sign}`\r\n\r\n        const response = await fetch(url)\r\n        const data = await response.json() as {\r\n          trans_code?: string\r\n          error_code?: string\r\n          trans_result?: Array<{ dst: string }>\r\n        }\r\n\r\n        if (data.trans_code === '200' || data.error_code === '52000') {\r\n          results.push(data.trans_result?.[0]?.dst || text)\r\n        } else {\r\n          console.warn('Baidu translation failed:', data)\r\n          results.push(text)\r\n        }\r\n      } catch (error) {\r\n        console.warn('Baidu translation error:', error)\r\n        results.push(text)\r\n      }\r\n    }\r\n\r\n    return results\r\n  }\r\n\r\n  private generateSign(text: string, salt: number): string {\r\n    // MD5(appId + text + salt + secret)\r\n    const str = this.options.appId + text + salt + this.options.secret\r\n    return createHash('md5').update(str).digest('hex')\r\n  }\r\n}\r\n","/**\r\n * GLM (æ™ºè°±AI) Translator\r\n * ä½¿ç”¨ GLM-4 ç­‰æ¨¡å‹è¿›è¡Œç¿»è¯‘\r\n */\r\n\r\nimport { BaseTranslator, TranslatorOptions } from './base.js'\r\n\r\n/**\r\n * ç¿»è¯‘é”™è¯¯ç±»\r\n */\r\nexport class TranslationError extends Error {\r\n  public readonly failures: Array<{ text: string; error: string }>\r\n\r\n  constructor(message: string, failures: Array<{ text: string; error: string }>) {\r\n    super(message)\r\n    this.name = 'TranslationError'\r\n    this.failures = failures\r\n  }\r\n}\r\n\r\nexport interface GLMTranslatorOptions extends TranslatorOptions {\r\n  apiKey: string\r\n  model?: string\r\n  baseUrl?: string\r\n}\r\n\r\nexport class GLMTranslator extends BaseTranslator {\r\n  protected supportedLanguages = ['zh-CN', 'en-US', 'ja-JP', 'ko-KR', 'fr-FR', 'de-DE', 'es-ES', 'ru-RU']\r\n  protected options: GLMTranslatorOptions\r\n\r\n  constructor(options: GLMTranslatorOptions) {\r\n    super(options)\r\n    this.options = {\r\n      model: 'glm-4',\r\n      baseUrl: 'https://open.bigmodel.cn/api/paas/v4/chat/completions',\r\n      ...options\r\n    }\r\n  }\r\n\r\n  validateConfig(options: GLMTranslatorOptions): boolean {\r\n    if (!options.apiKey) {\r\n      throw new Error('GLM Translator requires API Key')\r\n    }\r\n    return true\r\n  }\r\n\r\n  async translate(texts: string[], from: string, to: string): Promise<string[]> {\r\n    this.validateConfig(this.options)\r\n\r\n    if (texts.length === 0) {\r\n      return []\r\n    }\r\n\r\n    // æ‰¹é‡ç¿»è¯‘é…ç½®\r\n    const batchSize = 10 // æ¯æ‰¹æœ€å¤šç¿»è¯‘ 10 ä¸ªæ–‡æœ¬\r\n    const results: string[] = []\r\n    const errors: Array<{ text: string; error: string }> = []\r\n\r\n    // åˆ†æ‰¹å¤„ç†\r\n    for (let i = 0; i < texts.length; i += batchSize) {\r\n      const batch = texts.slice(i, Math.min(i + batchSize, texts.length))\r\n      const batchNumber = Math.floor(i / batchSize) + 1\r\n      const totalBatches = Math.ceil(texts.length / batchSize)\r\n\r\n      try {\r\n        console.log(`  [æ‰¹æ¬¡ ${batchNumber}/${totalBatches}] æ­£åœ¨ç¿»è¯‘ ${batch.length} ä¸ªæ–‡æœ¬...`)\r\n        const translations = await this.translateBatch(batch, from, to)\r\n        results.push(...translations)\r\n      } catch (error) {\r\n        // æ‰¹é‡å¤±è´¥æ—¶ï¼Œé™çº§ä¸ºé€ä¸ªç¿»è¯‘\r\n        console.log(`  [æ‰¹æ¬¡ ${batchNumber}] æ‰¹é‡ç¿»è¯‘å¤±è´¥ï¼Œé™çº§ä¸ºé€ä¸ªç¿»è¯‘...`)\r\n        for (const text of batch) {\r\n          try {\r\n            const translation = await this.translateSingle(text, from, to)\r\n            results.push(translation)\r\n          } catch (singleError) {\r\n            const errorMessage = singleError instanceof Error ? singleError.message : String(singleError)\r\n            errors.push({ text, error: errorMessage })\r\n            results.push(text) // å¤±è´¥æ—¶ä½¿ç”¨åŸæ–‡\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // å¦‚æœæœ‰ä»»ä½•ç¿»è¯‘å¤±è´¥ï¼ŒæŠ›å‡ºé”™è¯¯\r\n    if (errors.length > 0) {\r\n      const error = new TranslationError('Some texts failed to translate', errors)\r\n      throw error\r\n    }\r\n\r\n    return results\r\n  }\r\n\r\n  private async translateBatch(texts: string[], from: string, to: string): Promise<string[]> {\r\n    // æ„å»ºæ‰¹é‡ç¿»è¯‘ prompt\r\n    const items = texts.map((text, index) => `${index + 1}. ${text}`).join('\\n')\r\n    const prompt = `è¯·å°†ä»¥ä¸‹${this.getLanguageName(from)}ç¿»è¯‘æˆ${this.getLanguageName(to)}ï¼Œä¸ºæ¯ä¸€è¡Œæä¾›å¯¹åº”çš„ç¿»è¯‘ç»“æœã€‚ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹ JSON æ ¼å¼è¿”å›ï¼Œä¸è¦æœ‰ä»»ä½•å…¶ä»–å†…å®¹ï¼š\r\n{\r\n  \"translations\": [\"ç¿»è¯‘1\", \"ç¿»è¯‘2\", \"ç¿»è¯‘3\", ...]\r\n}\r\n\r\nå¾…ç¿»è¯‘æ–‡æœ¬ï¼š\r\n${items}`\r\n\r\n    const response = await fetch(this.options.baseUrl!, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${this.options.apiKey}`\r\n      },\r\n      body: JSON.stringify({\r\n        model: this.options.model,\r\n        messages: [\r\n          {\r\n            role: 'user',\r\n            content: prompt\r\n          }\r\n        ],\r\n        temperature: 0.3,\r\n        top_p: 0.7,\r\n        stream: false\r\n      })\r\n    })\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text()\r\n      throw new Error(`GLM API error: ${response.status} ${response.statusText} - ${errorText}`)\r\n    }\r\n\r\n    const data = await response.json() as any\r\n\r\n    if (data.error) {\r\n      throw new Error(`GLM API error: ${data.error.message || JSON.stringify(data.error)}`)\r\n    }\r\n\r\n    const content = data.choices?.[0]?.message?.content || ''\r\n\r\n    // è§£æ JSON å“åº”\r\n    try {\r\n      const jsonMatch = content.match(/\\{[\\s\\S]*\\}/)\r\n      if (!jsonMatch) {\r\n        throw new Error('No JSON found in response')\r\n      }\r\n\r\n      const result = JSON.parse(jsonMatch[0])\r\n      const translations = result.translations || []\r\n\r\n      if (translations.length !== texts.length) {\r\n        throw new Error(`Expected ${texts.length} translations, got ${translations.length}`)\r\n      }\r\n\r\n      return translations\r\n    } catch (error) {\r\n      // JSON è§£æå¤±è´¥ï¼ŒæŠ›å‡ºé”™è¯¯è®©ä¸Šå±‚é™çº§ä¸ºå•ä¸ªç¿»è¯‘\r\n      throw new Error(`Failed to parse batch translation response: ${error instanceof Error ? error.message : String(error)}`)\r\n    }\r\n  }\r\n\r\n  private async translateSingle(text: string, from: string, to: string): Promise<string> {\r\n    const prompt = `è¯·å°†ä»¥ä¸‹${this.getLanguageName(from)}ç¿»è¯‘æˆ${this.getLanguageName(to)}ï¼Œåªè¿”å›ç¿»è¯‘ç»“æœï¼Œä¸è¦æœ‰ä»»ä½•è§£é‡Šã€‚\\n\\n${text}`\r\n\r\n    const response = await fetch(this.options.baseUrl!, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${this.options.apiKey}`\r\n      },\r\n      body: JSON.stringify({\r\n        model: this.options.model,\r\n        messages: [\r\n          {\r\n            role: 'user',\r\n            content: prompt\r\n          }\r\n        ],\r\n        temperature: 0.3,\r\n        top_p: 0.7,\r\n        stream: false\r\n      })\r\n    })\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text()\r\n      throw new Error(`GLM API error: ${response.status} ${response.statusText} - ${errorText}`)\r\n    }\r\n\r\n    const data = await response.json() as any\r\n\r\n    if (data.error) {\r\n      throw new Error(`GLM API error: ${data.error.message || JSON.stringify(data.error)}`)\r\n    }\r\n\r\n    const content = data.choices?.[0]?.message?.content || text\r\n    return content.trim()\r\n  }\r\n\r\n  private getLanguageName(code: string): string {\r\n    const names: Record<string, string> = {\r\n      'zh-CN': 'ä¸­æ–‡',\r\n      'en-US': 'è‹±æ–‡',\r\n      'ja-JP': 'æ—¥æ–‡',\r\n      'ko-KR': 'éŸ©æ–‡'\r\n    }\r\n    return names[code] || code\r\n  }\r\n\r\n \r\n \r\n\r\n  protected delay(ms: number): Promise<void> {\r\n    return new Promise(resolve => setTimeout(resolve, ms))\r\n  }\r\n}\r\n","/**\r\n * Translators Module Entry Point\r\n */\r\n\r\nimport { BaseTranslator, type TranslationResult, type TranslatorOptions } from './base.js'\r\nimport { GoogleTranslator, type GoogleTranslatorOptions } from './google-translator.js'\r\nimport { OpenAITranslator, type OpenAITranslatorOptions } from './openai-translator.js'\r\nimport { DeepLTranslator, type DeepLTranslatorOptions } from './deepl-translator.js'\r\nimport { BaiduTranslator, type BaiduTranslatorOptions } from './baidu-translator.js'\r\nimport { GLMTranslator, type GLMTranslatorOptions } from './glm-translator.js'\r\nimport type { I18nConfig } from '../config.js'\r\n\r\nexport { BaseTranslator, type TranslationResult, type TranslatorOptions }\r\nexport { GoogleTranslator, type GoogleTranslatorOptions }\r\nexport { OpenAITranslator, type OpenAITranslatorOptions }\r\nexport { DeepLTranslator, type DeepLTranslatorOptions }\r\nexport { BaiduTranslator, type BaiduTranslatorOptions }\r\nexport { GLMTranslator, type GLMTranslatorOptions }\r\n\r\n/**\r\n * æ ¹æ®é…ç½®åˆ›å»ºç¿»è¯‘å™¨å®ä¾‹ï¼ˆä½¿ç”¨ç»Ÿä¸€é…ç½®ï¼‰\r\n * @param config - I18nConfig é…ç½®å¯¹è±¡\r\n * @returns ç¿»è¯‘å™¨å®ä¾‹\r\n */\r\nexport function createTranslatorFromConfig(config: I18nConfig): BaseTranslator {\r\n  const { translateService, translator } = config\r\n\r\n  switch (translateService) {\r\n    case 'google': {\r\n      const googleConfig = translator?.google || { useFreeAPI: true }\r\n      return new GoogleTranslator({\r\n        apiKey: googleConfig.apiKey || '',\r\n        useFreeAPI: googleConfig.useFreeAPI ?? true,\r\n      })\r\n    }\r\n\r\n    case 'openai': {\r\n      const openaiConfig = translator?.openai || {}\r\n      return new OpenAITranslator({\r\n        apiKey: openaiConfig.apiKey || '',\r\n        model: openaiConfig.model,\r\n        baseUrl: openaiConfig.baseUrl,\r\n      })\r\n    }\r\n\r\n    case 'glm': {\r\n      const glmConfig = translator?.glm || {}\r\n      return new GLMTranslator({\r\n        apiKey: glmConfig.apiKey || '',\r\n        model: glmConfig.model,\r\n        baseUrl: glmConfig.baseUrl,\r\n      })\r\n    }\r\n\r\n    case 'deepl': {\r\n      const deeplConfig = translator?.deepl || {}\r\n      return new DeepLTranslator({\r\n        apiKey: deeplConfig.apiKey || '',\r\n        apiUrl: deeplConfig.apiUrl,\r\n      })\r\n    }\r\n\r\n    case 'baidu': {\r\n      const baiduConfig = translator?.baidu || {}\r\n      return new BaiduTranslator({\r\n        appId: baiduConfig.appId || '',\r\n        secret: baiduConfig.secret || '',\r\n      })\r\n    }\r\n\r\n    default:\r\n      throw new Error(`Unsupported translation service: ${translateService}`)\r\n  }\r\n}\r\n\r\n/**\r\n * Translator Registry\r\n * Allows registering and creating translator instances\r\n */\r\nexport class TranslatorRegistry {\r\n  #translators = new Map<string, any>()\r\n\r\n  register(name: string, TranslatorClass: any) {\r\n    this.#translators.set(name, TranslatorClass)\r\n  }\r\n\r\n  create(name: string, config: any) {\r\n    const Class = this.#translators.get(name)\r\n    if (!Class) {\r\n      throw new Error(`Translator \"${name}\" not found in registry`)\r\n    }\r\n    return new Class(config)\r\n  }\r\n\r\n  list(): string[] {\r\n    return Array.from(this.#translators.keys())\r\n  }\r\n}\r\n\r\n// Create default registry and register built-in translators\r\nexport const defaultRegistry = new TranslatorRegistry()\r\n\r\n// Register built-in translators\r\ndefaultRegistry.register('google', GoogleTranslator)\r\ndefaultRegistry.register('openai', OpenAITranslator)\r\ndefaultRegistry.register('glm', GLMTranslator)\r\ndefaultRegistry.register('deepl', DeepLTranslator)\r\ndefaultRegistry.register('baidu', BaiduTranslator)\r\n","/**\r\n * Utility Functions\r\n */\r\n\r\nimport { promises as fs } from 'fs'\r\nimport path from 'path'\r\n\r\n/**\r\n * Ensure directory exists\r\n */\r\nexport async function ensureDir(dir: string): Promise<void> {\r\n  try {\r\n    await fs.access(dir)\r\n  } catch {\r\n    await fs.mkdir(dir, { recursive: true })\r\n  }\r\n}\r\n\r\n/**\r\n * Save extracted text to cache file\r\n */\r\nexport async function saveExtractedText(result: any, config: any = {}): Promise<string> {\r\n  const cacheDir = config.cacheDir || '.i18n-cache'\r\n  await ensureDir(cacheDir)\r\n\r\n  const filePath = path.join(cacheDir, 'extracted.json')\r\n  await fs.writeFile(filePath, JSON.stringify(result, null, 2), 'utf-8')\r\n\r\n  return filePath\r\n}\r\n\r\n/**\r\n * Load extracted text from cache\r\n */\r\nexport async function loadExtractedText(config: any = {}): Promise<any> {\r\n  const cacheDir = config.cacheDir || '.i18n-cache'\r\n  const filePath = path.join(cacheDir, 'extracted.json')\r\n\r\n  try {\r\n    await fs.access(filePath)\r\n  } catch {\r\n    throw new Error('Please run extract command first to extract text')\r\n  }\r\n\r\n  const content = await fs.readFile(filePath, 'utf-8')\r\n  return JSON.parse(content)\r\n}\r\n\r\n/**\r\n * Save locale file\r\n */\r\nexport async function saveLocale(lang: string, data: any, config: any = {}): Promise<string> {\r\n  const dir = config.localesDir || 'src/locales'\r\n  await ensureDir(dir)\r\n\r\n  const filePath = path.join(dir, `${lang}.json`)\r\n  await fs.writeFile(filePath, JSON.stringify(data, null, 2), 'utf-8')\r\n\r\n  return filePath\r\n}\r\n\r\n/**\r\n * Load locale file\r\n */\r\nexport async function loadLocale(lang: string, config: any = {}): Promise<any> {\r\n  const localesDir = config.localesDir || 'src/locales'\r\n  const filePath = path.join(localesDir, `${lang}.json`)\r\n\r\n  try {\r\n    await fs.access(filePath)\r\n  } catch {\r\n    return {}\r\n  }\r\n\r\n  const content = await fs.readFile(filePath, 'utf-8')\r\n  return JSON.parse(content)\r\n}\r\n\r\n/**\r\n * Generate unique key for text\r\n */\r\nexport function generateKey(text: string, index: number): string {\r\n  // If text is short and doesn't contain special characters, use text as key\r\n  if (text.length <= 20 && /^[\\u4e00-\\u9fa5a-zA-Z0-9]+$/.test(text)) {\r\n    return text\r\n  }\r\n\r\n  // Otherwise use auto-generated key\r\n  return `text_${index}`\r\n}\r\n\r\n/**\r\n * Check if string contains Chinese characters\r\n */\r\nexport function hasChinese(text: string): boolean {\r\n  return /[\\u4e00-\\u9fa5]/.test(text)\r\n}\r\n\r\n/**\r\n * Normalize whitespace in text\r\n */\r\nexport function normalizeText(text: string): string {\r\n  return text.trim().replace(/\\s+/g, ' ')\r\n}\r\n\r\n/**\r\n * Read file with encoding\r\n */\r\nexport async function readFile(filePath: string, encoding: BufferEncoding = 'utf-8'): Promise<string> {\r\n  return await fs.readFile(filePath, encoding)\r\n}\r\n\r\n/**\r\n * Write file with encoding\r\n */\r\nexport async function writeFile(filePath: string, content: string, encoding: BufferEncoding = 'utf-8'): Promise<void> {\r\n  await ensureDir(path.dirname(filePath))\r\n  await fs.writeFile(filePath, content, encoding)\r\n}\r\n\r\n/**\r\n * Check if file exists\r\n */\r\nexport async function fileExists(filePath: string): Promise<boolean> {\r\n  try {\r\n    await fs.access(filePath)\r\n    return true\r\n  } catch {\r\n    return false\r\n  }\r\n}\r\n"],"mappings":"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","names":["hasChinese","traverse","parse","path","VueExtractor","JSExtractor","fs","path","readFile"]}