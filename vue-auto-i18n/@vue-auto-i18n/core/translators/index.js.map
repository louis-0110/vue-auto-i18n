{"version":3,"sources":["../../src/translators/base.ts","../../src/translators/google-translator.ts","../../src/translators/openai-translator.ts","../../src/translators/deepl-translator.ts","../../src/translators/baidu-translator.ts","../../src/translators/glm-translator.ts","../../src/translators/index.ts"],"sourcesContent":["/**\r\n * Base Translator Class\r\n * All translators should extend this class\r\n */\r\n\r\nexport interface TranslationResult {\r\n  original: string\r\n  translated: string\r\n  error?: string\r\n}\r\n\r\nexport interface TranslatorOptions {\r\n  apiKey?: string\r\n  apiUrl?: string\r\n  maxRetries?: number\r\n  timeout?: number\r\n}\r\n\r\nexport abstract class BaseTranslator {\r\n  protected options: TranslatorOptions\r\n  protected abstract supportedLanguages: string[]\r\n\r\n  constructor(options: TranslatorOptions = {}) {\r\n    this.options = {\r\n      maxRetries: 3,\r\n      timeout: 30000,\r\n      ...options\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Translate texts from source language to target language\r\n   * @param texts - Array of texts to translate\r\n   * @param from - Source language code (e.g., 'zh-CN')\r\n   * @param to - Target language code (e.g., 'en-US')\r\n   * @returns Array of translation results\r\n   */\r\n  abstract translate(texts: string[], from: string, to: string): Promise<string[]>\r\n\r\n  /**\r\n   * Validate translator configuration\r\n   * @param options - Options to validate\r\n   * @returns true if configuration is valid\r\n   * @throws Error if configuration is invalid\r\n   */\r\n  abstract validateConfig(options: TranslatorOptions): boolean\r\n\r\n  /**\r\n   * Check if language is supported\r\n   * @param language - Language code to check\r\n   * @returns true if language is supported\r\n   */\r\n  supportsLanguage(language: string): boolean {\r\n    return this.supportedLanguages.includes(language)\r\n  }\r\n\r\n  /**\r\n   * Batch translate with error handling\r\n   * @param texts - Array of texts to translate\r\n   * @param from - Source language code\r\n   * @param to - Target language code\r\n   * @param batchSize - Number of texts to translate per batch\r\n   * @returns Array of translation results with error handling\r\n   */\r\n  async batchTranslate(\r\n    texts: string[],\r\n    from: string,\r\n    to: string,\r\n    batchSize: number = 10\r\n  ): Promise<TranslationResult[]> {\r\n    const results: TranslationResult[] = []\r\n\r\n    for (let i = 0; i < texts.length; i += batchSize) {\r\n      const batch = texts.slice(i, i + batchSize)\r\n\r\n      try {\r\n        const translated = await this.translate(batch, from, to)\r\n\r\n        for (let j = 0; j < batch.length; j++) {\r\n          results.push({\r\n            original: batch[j],\r\n            translated: translated[j] || batch[j] // Fallback to original if translation fails\r\n          })\r\n        }\r\n      } catch (error) {\r\n        // On error, return original texts for this batch\r\n        for (const text of batch) {\r\n          results.push({\r\n            original: text,\r\n            translated: text,\r\n            error: error instanceof Error ? error.message : String(error)\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    return results\r\n  }\r\n\r\n  /**\r\n   * Delay execution for specified milliseconds\r\n   * @param ms - Milliseconds to delay\r\n   */\r\n  protected delay(ms: number): Promise<void> {\r\n    return new Promise(resolve => setTimeout(resolve, ms))\r\n  }\r\n}\r\n","/**\r\n * Google Translate Translator\r\n * Uses both official API and free API\r\n */\r\n\r\nimport { BaseTranslator, TranslatorOptions } from './base.js'\r\n\r\nexport interface GoogleTranslatorOptions extends TranslatorOptions {\r\n  apiKey?: string\r\n  useFreeAPI?: boolean\r\n}\r\n\r\nexport class GoogleTranslator extends BaseTranslator {\r\n  protected supportedLanguages = ['zh-CN', 'en-US', 'ja-JP', 'ko-KR', 'fr-FR', 'de-DE', 'es-ES', 'ru-RU', 'pt-BR', 'it-IT']\r\n  protected options: GoogleTranslatorOptions\r\n\r\n  private baseUrl = 'https://translation.googleapis.com/language/translate/v2'\r\n\r\n  // Google Translate uses different language codes (zh instead of zh-CN)\r\n  private languageCodeMap: Record<string, string> = {\r\n    'zh-CN': 'zh',\r\n    'en-US': 'en',\r\n    'ja-JP': 'ja',\r\n    'ko-KR': 'ko',\r\n    'fr-FR': 'fr',\r\n    'de-DE': 'de',\r\n    'es-ES': 'es',\r\n    'ru-RU': 'ru',\r\n    'pt-BR': 'pt',\r\n    'it-IT': 'it',\r\n    'zh-TW': 'zh-TW',\r\n    'ar': 'ar',\r\n    'hi': 'hi',\r\n    'th': 'th',\r\n    'vi': 'vi'\r\n  }\r\n\r\n  constructor(options: GoogleTranslatorOptions = {}) {\r\n    super(options)\r\n    this.options = {\r\n      useFreeAPI: !options.apiKey,\r\n      ...options\r\n    }\r\n  }\r\n\r\n  validateConfig(options: GoogleTranslatorOptions): boolean {\r\n    if (!options.useFreeAPI && !options.apiKey) {\r\n      throw new Error('Google Translate requires API Key when not using free API')\r\n    }\r\n    return true\r\n  }\r\n\r\n  async translate(texts: string[], from: string, to: string): Promise<string[]> {\r\n    if (texts.length === 0) {\r\n      return []\r\n    }\r\n\r\n    if (this.options.useFreeAPI) {\r\n      return this.translateWithFreeAPI(texts, from, to)\r\n    } else {\r\n      return this.translateWithAPI(texts, from, to)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Convert locale code to Google language code\r\n   */\r\n  private toGoogleLang(code: string): string {\r\n    return this.languageCodeMap[code] || code.split('-')[0]\r\n  }\r\n\r\n  /**\r\n   * Use official API (requires payment) with batch optimization\r\n   */\r\n  private async translateWithAPI(texts: string[], from: string, to: string): Promise<string[]> {\r\n    const googleFrom = this.toGoogleLang(from)\r\n    const googleTo = this.toGoogleLang(to)\r\n\r\n    const batchSize = 50 // Official API supports up to 50 texts per request\r\n    const results: string[] = []\r\n\r\n    for (let i = 0; i < texts.length; i += batchSize) {\r\n      const batch = texts.slice(i, Math.min(i + batchSize, texts.length))\r\n\r\n      const response = await fetch(`${this.baseUrl}?key=${this.options.apiKey}`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          q: batch,\r\n          source: googleFrom,\r\n          target: googleTo,\r\n          format: 'text'\r\n        })\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text()\r\n        throw new Error(`Google API error: ${response.status} ${response.statusText} - ${errorText}`)\r\n      }\r\n\r\n      const data = await response.json() as any\r\n      if (data.error) {\r\n        throw new Error(`Google API error: ${data.error.message || JSON.stringify(data.error)}`)\r\n      }\r\n\r\n      const translations = data.data?.translations || []\r\n      results.push(...translations.map((t: any) => t.translatedText))\r\n    }\r\n\r\n    return results\r\n  }\r\n\r\n  /**\r\n   * Use free Google Translate with concurrent batch optimization\r\n   */\r\n  private async translateWithFreeAPI(texts: string[], from: string, to: string): Promise<string[]> {\r\n    const googleFrom = this.toGoogleLang(from)\r\n    const googleTo = this.toGoogleLang(to)\r\n\r\n    const concurrency = 5 // Âπ∂ÂèëÊï∞ÈáèÔºö‰∏ÄÊ¨°Â§ÑÁêÜ 5 ‰∏™ËØ∑Ê±Ç\r\n    const delayBetweenBatches = 50 // ÊâπÊ¨°Èó¥Âª∂ËøüÔºàÊØ´ÁßíÔºâ\r\n\r\n    const results: string[] = []\r\n    const errors: Array<{ text: string; error: string }> = []\r\n\r\n    console.log(`  üöÄ ‰ΩøÁî®Âπ∂ÂèëÊ®°Âºè (Âπ∂ÂèëÊï∞: ${concurrency})`)\r\n\r\n    // ÂàÜÊâπÂ§ÑÁêÜÔºåÊØèÊâπÂπ∂ÂèëÊâßË°å\r\n    for (let i = 0; i < texts.length; i += concurrency) {\r\n      const batch = texts.slice(i, Math.min(i + concurrency, texts.length))\r\n      const batchNumber = Math.floor(i / concurrency) + 1\r\n      const totalBatches = Math.ceil(texts.length / concurrency)\r\n\r\n      console.log(`  [ÊâπÊ¨° ${batchNumber}/${totalBatches}] Ê≠£Âú®Âπ∂ÂèëÁøªËØë ${batch.length} ‰∏™ÊñáÊú¨...`)\r\n\r\n      // Âπ∂ÂèëÁøªËØëÂΩìÂâçÊâπÊ¨°\r\n      const batchPromises = batch.map((text, index) =>\r\n        this.translateSingleWithFreeAPI(text, googleFrom, googleTo)\r\n          .then(result => ({ success: true as const, result, text }))\r\n          .catch(error => ({\r\n            success: false as const,\r\n            result: text, // Â§±Ë¥•Êó∂‰ΩøÁî®ÂéüÊñá\r\n            text,\r\n            error: error instanceof Error ? error.message : String(error)\r\n          }))\r\n      )\r\n\r\n      const batchResults = await Promise.all(batchPromises)\r\n\r\n      // Â§ÑÁêÜÊâπÊ¨°ÁªìÊûú\r\n      for (const item of batchResults) {\r\n        if (item.success) {\r\n          results.push(item.result)\r\n        } else {\r\n          errors.push({ text: item.text, error: item.error })\r\n          results.push(item.result)\r\n        }\r\n      }\r\n\r\n      // ÊâπÊ¨°‰πãÈó¥Ê∑ªÂä†Áü≠ÊöÇÂª∂Ëøü\r\n      if (i + concurrency < texts.length) {\r\n        await this.delay(delayBetweenBatches)\r\n      }\r\n    }\r\n\r\n    if (errors.length > 0) {\r\n      console.warn(`\\n‚ö†Ô∏è  ${errors.length} ‰∏™ÊñáÊú¨ÁøªËØëÂ§±Ë¥•ÔºåÂ∑≤‰ΩøÁî®ÂéüÊñá`)\r\n      errors.forEach(({ text, error }) => {\r\n        console.warn(`  - \"${text}\": ${error}`)\r\n      })\r\n    }\r\n\r\n    return results\r\n  }\r\n\r\n  /**\r\n   * Translate a single text using free API\r\n   */\r\n  private async translateSingleWithFreeAPI(text: string, from: string, to: string): Promise<string> {\r\n    const url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=${from}&tl=${to}&dt=t&q=${encodeURIComponent(text)}`\r\n\r\n    const response = await fetch(url, {\r\n      signal: AbortSignal.timeout(10000)\r\n    })\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}`)\r\n    }\r\n\r\n    const data = await response.json() as any\r\n    const translated = data[0]?.map((item: any) => item[0]).join('') || text\r\n    return translated\r\n  }\r\n\r\n  protected delay(ms: number): Promise<void> {\r\n    return new Promise(resolve => setTimeout(resolve, ms))\r\n  }\r\n}\r\n","/**\r\n * OpenAI Translator\r\n * Uses GPT models for translation, best contextual understanding\r\n */\r\n\r\nimport { BaseTranslator, TranslatorOptions } from './base.js'\r\n\r\nexport interface OpenAITranslatorOptions extends TranslatorOptions {\r\n  apiKey: string\r\n  model?: string\r\n  baseUrl?: string\r\n}\r\n\r\nexport class OpenAITranslator extends BaseTranslator {\r\n  protected supportedLanguages = ['zh-CN', 'en-US', 'ja-JP', 'ko-KR', 'fr-FR', 'de-DE', 'es-ES', 'ru-RU']\r\n  protected options: OpenAITranslatorOptions\r\n\r\n  constructor(options: OpenAITranslatorOptions) {\r\n    super(options)\r\n    this.options = {\r\n      model: 'gpt-3.5-turbo',\r\n      baseUrl: 'https://api.openai.com/v1/chat/completions',\r\n      ...options\r\n    }\r\n  }\r\n\r\n  private getBaseUrl(): string {\r\n    return this.options.baseUrl || 'https://api.openai.com/v1/chat/completions'\r\n  }\r\n\r\n  validateConfig(options: OpenAITranslatorOptions): boolean {\r\n    if (!options.apiKey) {\r\n      throw new Error('OpenAI requires API Key')\r\n    }\r\n    return true\r\n  }\r\n\r\n  async translate(texts: string[], from: string, to: string): Promise<string[]> {\r\n    const batchSize = 10\r\n    const results: string[] = []\r\n\r\n    for (let i = 0; i < texts.length; i += batchSize) {\r\n      const batch = texts.slice(i, i + batchSize)\r\n\r\n      try {\r\n        const prompt = this.buildPrompt(batch, from, to)\r\n\r\n        const response = await fetch(this.getBaseUrl(), {\r\n          method: 'POST',\r\n          headers: {\r\n            'Authorization': `Bearer ${this.options.apiKey}`,\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            model: this.options.model,\r\n            messages: [\r\n              {\r\n                role: 'system',\r\n                content: 'You are a professional translation assistant. Translate the provided text to the target language and return only the translation results without any explanation.'\r\n              },\r\n              {\r\n                role: 'user',\r\n                content: prompt\r\n              }\r\n            ],\r\n            temperature: 0.3\r\n          })\r\n        })\r\n\r\n        const data = await response.json() as { choices: Array<{ message: { content: string } }> }\r\n        const translated = data.choices[0]?.message?.content || ''\r\n        const translations = translated.split('\\n').filter((t: string) => t.trim())\r\n\r\n        results.push(...translations)\r\n\r\n      } catch (error) {\r\n        console.warn('OpenAI translation failed:', error)\r\n        results.push(...batch)\r\n      }\r\n    }\r\n\r\n    return results\r\n  }\r\n\r\n  private buildPrompt(texts: string[], from: string, to: string): string {\r\n    const langNames: Record<string, string> = {\r\n      'zh-CN': 'Chinese',\r\n      'en-US': 'English',\r\n      'ja-JP': 'Japanese',\r\n      'ko-KR': 'Korean',\r\n      'fr-FR': 'French',\r\n      'de-DE': 'German',\r\n      'es-ES': 'Spanish',\r\n      'ru-RU': 'Russian'\r\n    }\r\n\r\n    const sourceLang = langNames[from] || from\r\n    const targetLang = langNames[to] || to\r\n\r\n    const textList = texts.map((text, i) => `${i + 1}. ${text}`).join('\\n')\r\n\r\n    return `Please translate the following ${sourceLang} texts into ${targetLang}, one translation result per line:\\n\\n${textList}`\r\n  }\r\n}\r\n","/**\r\n * DeepL Translator\r\n * Best translation quality, but requires payment\r\n */\r\n\r\nimport { BaseTranslator, TranslatorOptions } from './base.js'\r\n\r\nexport interface DeepLTranslatorOptions extends TranslatorOptions {\r\n  apiKey: string\r\n  apiUrl?: string\r\n}\r\n\r\nexport class DeepLTranslator extends BaseTranslator {\r\n  protected supportedLanguages = ['zh-CN', 'en-US', 'ja-JP', 'ko-KR', 'fr-FR', 'de-DE', 'es-ES', 'ru-RU']\r\n  protected options: DeepLTranslatorOptions\r\n\r\n  constructor(options: DeepLTranslatorOptions) {\r\n    super(options)\r\n    this.options = {\r\n      apiUrl: 'https://api-free.deepl.com/v2/translate',\r\n      ...options\r\n    }\r\n  }\r\n\r\n  private getApiUrl(): string {\r\n    return this.options.apiUrl || 'https://api-free.deepl.com/v2/translate'\r\n  }\r\n\r\n  validateConfig(options: DeepLTranslatorOptions): boolean {\r\n    if (!options.apiKey) {\r\n      throw new Error('DeepL requires API Key')\r\n    }\r\n    return true\r\n  }\r\n\r\n  async translate(texts: string[], from: string, to: string): Promise<string[]> {\r\n    // DeepL supports batch translation but has text length limits\r\n    const results: string[] = []\r\n\r\n    // Process in batches (max 50 texts per batch)\r\n    const batchSize = 50\r\n    for (let i = 0; i < texts.length; i += batchSize) {\r\n      const batch = texts.slice(i, i + batchSize)\r\n\r\n      try {\r\n        const response = await fetch(this.getApiUrl(), {\r\n          method: 'POST',\r\n          headers: {\r\n            'Authorization': `DeepL-Auth-Key ${this.options.apiKey}`,\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            text: batch,\r\n            source_lang: from.toUpperCase().replace('-', '-'),\r\n            target_lang: to.toUpperCase().replace('-', '-')\r\n          })\r\n        })\r\n\r\n        const data = await response.json() as { translations: Array<{ text: string }> }\r\n        const translations = data.translations.map((t) => t.text)\r\n        results.push(...translations)\r\n\r\n      } catch (error) {\r\n        console.warn('DeepL translation failed:', error)\r\n        // Return original texts on failure\r\n        results.push(...batch)\r\n      }\r\n    }\r\n\r\n    return results\r\n  }\r\n}\r\n","/**\r\n * Baidu Translator\r\n * Large free tier\r\n */\r\n\r\nimport { createHash } from 'crypto'\r\nimport { BaseTranslator, TranslatorOptions } from './base.js'\r\n\r\nexport interface BaiduTranslatorOptions extends TranslatorOptions {\r\n  appId: string\r\n  secret: string\r\n}\r\n\r\nexport class BaiduTranslator extends BaseTranslator {\r\n  protected supportedLanguages = ['zh-CN', 'en-US', 'ja-JP', 'ko-KR', 'fr-FR', 'de-DE', 'es-ES', 'ru-RU']\r\n  protected options: BaiduTranslatorOptions\r\n  private baseUrl = 'https://fanyi-api.baidu.com/api/trans/vip/translate'\r\n\r\n  constructor(options: BaiduTranslatorOptions) {\r\n    super(options)\r\n    this.options = options\r\n  }\r\n\r\n  validateConfig(options: BaiduTranslatorOptions): boolean {\r\n    if (!options.appId || !options.secret) {\r\n      throw new Error('Baidu Translator requires appId and secret')\r\n    }\r\n    return true\r\n  }\r\n\r\n  async translate(texts: string[], from: string, to: string): Promise<string[]> {\r\n    const results: string[] = []\r\n\r\n    for (const text of texts) {\r\n      try {\r\n        const salt = Date.now()\r\n        const sign = this.generateSign(text, salt)\r\n\r\n        const url = `${this.baseUrl}?q=${encodeURIComponent(text)}&from=${from}&to=${to}&appid=${this.options.appId}&salt=${salt}&sign=${sign}`\r\n\r\n        const response = await fetch(url)\r\n        const data = await response.json() as {\r\n          trans_code?: string\r\n          error_code?: string\r\n          trans_result?: Array<{ dst: string }>\r\n        }\r\n\r\n        if (data.trans_code === '200' || data.error_code === '52000') {\r\n          results.push(data.trans_result?.[0]?.dst || text)\r\n        } else {\r\n          console.warn('Baidu translation failed:', data)\r\n          results.push(text)\r\n        }\r\n      } catch (error) {\r\n        console.warn('Baidu translation error:', error)\r\n        results.push(text)\r\n      }\r\n    }\r\n\r\n    return results\r\n  }\r\n\r\n  private generateSign(text: string, salt: number): string {\r\n    // MD5(appId + text + salt + secret)\r\n    const str = this.options.appId + text + salt + this.options.secret\r\n    return createHash('md5').update(str).digest('hex')\r\n  }\r\n}\r\n","/**\r\n * GLM (Êô∫Ë∞±AI) Translator\r\n * ‰ΩøÁî® GLM-4 Á≠âÊ®°ÂûãËøõË°åÁøªËØë\r\n */\r\n\r\nimport { BaseTranslator, TranslatorOptions } from './base.js'\r\n\r\n/**\r\n * ÁøªËØëÈîôËØØÁ±ª\r\n */\r\nexport class TranslationError extends Error {\r\n  public readonly failures: Array<{ text: string; error: string }>\r\n\r\n  constructor(message: string, failures: Array<{ text: string; error: string }>) {\r\n    super(message)\r\n    this.name = 'TranslationError'\r\n    this.failures = failures\r\n  }\r\n}\r\n\r\nexport interface GLMTranslatorOptions extends TranslatorOptions {\r\n  apiKey: string\r\n  model?: string\r\n  baseUrl?: string\r\n}\r\n\r\nexport class GLMTranslator extends BaseTranslator {\r\n  protected supportedLanguages = ['zh-CN', 'en-US', 'ja-JP', 'ko-KR', 'fr-FR', 'de-DE', 'es-ES', 'ru-RU']\r\n  protected options: GLMTranslatorOptions\r\n\r\n  constructor(options: GLMTranslatorOptions) {\r\n    super(options)\r\n    this.options = {\r\n      model: 'glm-4',\r\n      baseUrl: 'https://open.bigmodel.cn/api/paas/v4/chat/completions',\r\n      ...options\r\n    }\r\n  }\r\n\r\n  validateConfig(options: GLMTranslatorOptions): boolean {\r\n    if (!options.apiKey) {\r\n      throw new Error('GLM Translator requires API Key')\r\n    }\r\n    return true\r\n  }\r\n\r\n  async translate(texts: string[], from: string, to: string): Promise<string[]> {\r\n    this.validateConfig(this.options)\r\n\r\n    if (texts.length === 0) {\r\n      return []\r\n    }\r\n\r\n    // ÊâπÈáèÁøªËØëÈÖçÁΩÆ\r\n    const batchSize = 10 // ÊØèÊâπÊúÄÂ§öÁøªËØë 10 ‰∏™ÊñáÊú¨\r\n    const results: string[] = []\r\n    const errors: Array<{ text: string; error: string }> = []\r\n\r\n    // ÂàÜÊâπÂ§ÑÁêÜ\r\n    for (let i = 0; i < texts.length; i += batchSize) {\r\n      const batch = texts.slice(i, Math.min(i + batchSize, texts.length))\r\n      const batchNumber = Math.floor(i / batchSize) + 1\r\n      const totalBatches = Math.ceil(texts.length / batchSize)\r\n\r\n      try {\r\n        console.log(`  [ÊâπÊ¨° ${batchNumber}/${totalBatches}] Ê≠£Âú®ÁøªËØë ${batch.length} ‰∏™ÊñáÊú¨...`)\r\n        const translations = await this.translateBatch(batch, from, to)\r\n        results.push(...translations)\r\n      } catch (error) {\r\n        // ÊâπÈáèÂ§±Ë¥•Êó∂ÔºåÈôçÁ∫ß‰∏∫ÈÄê‰∏™ÁøªËØë\r\n        console.log(`  [ÊâπÊ¨° ${batchNumber}] ÊâπÈáèÁøªËØëÂ§±Ë¥•ÔºåÈôçÁ∫ß‰∏∫ÈÄê‰∏™ÁøªËØë...`)\r\n        for (const text of batch) {\r\n          try {\r\n            const translation = await this.translateSingle(text, from, to)\r\n            results.push(translation)\r\n          } catch (singleError) {\r\n            const errorMessage = singleError instanceof Error ? singleError.message : String(singleError)\r\n            errors.push({ text, error: errorMessage })\r\n            results.push(text) // Â§±Ë¥•Êó∂‰ΩøÁî®ÂéüÊñá\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Â¶ÇÊûúÊúâ‰ªª‰ΩïÁøªËØëÂ§±Ë¥•ÔºåÊäõÂá∫ÈîôËØØ\r\n    if (errors.length > 0) {\r\n      const error = new TranslationError('Some texts failed to translate', errors)\r\n      throw error\r\n    }\r\n\r\n    return results\r\n  }\r\n\r\n  private async translateBatch(texts: string[], from: string, to: string): Promise<string[]> {\r\n    // ÊûÑÂª∫ÊâπÈáèÁøªËØë prompt\r\n    const items = texts.map((text, index) => `${index + 1}. ${text}`).join('\\n')\r\n    const prompt = `ËØ∑Â∞Ü‰ª•‰∏ã${this.getLanguageName(from)}ÁøªËØëÊàê${this.getLanguageName(to)}Ôºå‰∏∫ÊØè‰∏ÄË°åÊèê‰æõÂØπÂ∫îÁöÑÁøªËØëÁªìÊûú„ÄÇ‰∏•Ê†ºÊåâÁÖß‰ª•‰∏ã JSON Ê†ºÂºèËøîÂõûÔºå‰∏çË¶ÅÊúâ‰ªª‰ΩïÂÖ∂‰ªñÂÜÖÂÆπÔºö\r\n{\r\n  \"translations\": [\"ÁøªËØë1\", \"ÁøªËØë2\", \"ÁøªËØë3\", ...]\r\n}\r\n\r\nÂæÖÁøªËØëÊñáÊú¨Ôºö\r\n${items}`\r\n\r\n    const response = await fetch(this.options.baseUrl!, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${this.options.apiKey}`\r\n      },\r\n      body: JSON.stringify({\r\n        model: this.options.model,\r\n        messages: [\r\n          {\r\n            role: 'user',\r\n            content: prompt\r\n          }\r\n        ],\r\n        temperature: 0.3,\r\n        top_p: 0.7,\r\n        stream: false\r\n      })\r\n    })\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text()\r\n      throw new Error(`GLM API error: ${response.status} ${response.statusText} - ${errorText}`)\r\n    }\r\n\r\n    const data = await response.json() as any\r\n\r\n    if (data.error) {\r\n      throw new Error(`GLM API error: ${data.error.message || JSON.stringify(data.error)}`)\r\n    }\r\n\r\n    const content = data.choices?.[0]?.message?.content || ''\r\n\r\n    // Ëß£Êûê JSON ÂìçÂ∫î\r\n    try {\r\n      const jsonMatch = content.match(/\\{[\\s\\S]*\\}/)\r\n      if (!jsonMatch) {\r\n        throw new Error('No JSON found in response')\r\n      }\r\n\r\n      const result = JSON.parse(jsonMatch[0])\r\n      const translations = result.translations || []\r\n\r\n      if (translations.length !== texts.length) {\r\n        throw new Error(`Expected ${texts.length} translations, got ${translations.length}`)\r\n      }\r\n\r\n      return translations\r\n    } catch (error) {\r\n      // JSON Ëß£ÊûêÂ§±Ë¥•ÔºåÊäõÂá∫ÈîôËØØËÆ©‰∏äÂ±ÇÈôçÁ∫ß‰∏∫Âçï‰∏™ÁøªËØë\r\n      throw new Error(`Failed to parse batch translation response: ${error instanceof Error ? error.message : String(error)}`)\r\n    }\r\n  }\r\n\r\n  private async translateSingle(text: string, from: string, to: string): Promise<string> {\r\n    const prompt = `ËØ∑Â∞Ü‰ª•‰∏ã${this.getLanguageName(from)}ÁøªËØëÊàê${this.getLanguageName(to)}ÔºåÂè™ËøîÂõûÁøªËØëÁªìÊûúÔºå‰∏çË¶ÅÊúâ‰ªª‰ΩïËß£Èáä„ÄÇ\\n\\n${text}`\r\n\r\n    const response = await fetch(this.options.baseUrl!, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${this.options.apiKey}`\r\n      },\r\n      body: JSON.stringify({\r\n        model: this.options.model,\r\n        messages: [\r\n          {\r\n            role: 'user',\r\n            content: prompt\r\n          }\r\n        ],\r\n        temperature: 0.3,\r\n        top_p: 0.7,\r\n        stream: false\r\n      })\r\n    })\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text()\r\n      throw new Error(`GLM API error: ${response.status} ${response.statusText} - ${errorText}`)\r\n    }\r\n\r\n    const data = await response.json() as any\r\n\r\n    if (data.error) {\r\n      throw new Error(`GLM API error: ${data.error.message || JSON.stringify(data.error)}`)\r\n    }\r\n\r\n    const content = data.choices?.[0]?.message?.content || text\r\n    return content.trim()\r\n  }\r\n\r\n  private getLanguageName(code: string): string {\r\n    const names: Record<string, string> = {\r\n      'zh-CN': '‰∏≠Êñá',\r\n      'en-US': 'Ëã±Êñá',\r\n      'ja-JP': 'Êó•Êñá',\r\n      'ko-KR': 'Èü©Êñá'\r\n    }\r\n    return names[code] || code\r\n  }\r\n\r\n \r\n \r\n\r\n  protected delay(ms: number): Promise<void> {\r\n    return new Promise(resolve => setTimeout(resolve, ms))\r\n  }\r\n}\r\n","/**\r\n * Translators Module Entry Point\r\n */\r\n\r\nimport { BaseTranslator, type TranslationResult, type TranslatorOptions } from './base.js'\r\nimport { GoogleTranslator, type GoogleTranslatorOptions } from './google-translator.js'\r\nimport { OpenAITranslator, type OpenAITranslatorOptions } from './openai-translator.js'\r\nimport { DeepLTranslator, type DeepLTranslatorOptions } from './deepl-translator.js'\r\nimport { BaiduTranslator, type BaiduTranslatorOptions } from './baidu-translator.js'\r\nimport { GLMTranslator, type GLMTranslatorOptions } from './glm-translator.js'\r\nimport type { I18nConfig } from '../config.js'\r\n\r\nexport { BaseTranslator, type TranslationResult, type TranslatorOptions }\r\nexport { GoogleTranslator, type GoogleTranslatorOptions }\r\nexport { OpenAITranslator, type OpenAITranslatorOptions }\r\nexport { DeepLTranslator, type DeepLTranslatorOptions }\r\nexport { BaiduTranslator, type BaiduTranslatorOptions }\r\nexport { GLMTranslator, type GLMTranslatorOptions }\r\n\r\n/**\r\n * Ê†πÊçÆÈÖçÁΩÆÂàõÂª∫ÁøªËØëÂô®ÂÆû‰æãÔºà‰ΩøÁî®Áªü‰∏ÄÈÖçÁΩÆÔºâ\r\n * @param config - I18nConfig ÈÖçÁΩÆÂØπË±°\r\n * @returns ÁøªËØëÂô®ÂÆû‰æã\r\n */\r\nexport function createTranslatorFromConfig(config: I18nConfig): BaseTranslator {\r\n  const { translateService, translator } = config\r\n\r\n  switch (translateService) {\r\n    case 'google': {\r\n      const googleConfig = translator?.google || { useFreeAPI: true }\r\n      return new GoogleTranslator({\r\n        apiKey: googleConfig.apiKey || '',\r\n        useFreeAPI: googleConfig.useFreeAPI ?? true,\r\n      })\r\n    }\r\n\r\n    case 'openai': {\r\n      const openaiConfig = translator?.openai || {}\r\n      return new OpenAITranslator({\r\n        apiKey: openaiConfig.apiKey || '',\r\n        model: openaiConfig.model,\r\n        baseUrl: openaiConfig.baseUrl,\r\n      })\r\n    }\r\n\r\n    case 'glm': {\r\n      const glmConfig = translator?.glm || {}\r\n      return new GLMTranslator({\r\n        apiKey: glmConfig.apiKey || '',\r\n        model: glmConfig.model,\r\n        baseUrl: glmConfig.baseUrl,\r\n      })\r\n    }\r\n\r\n    case 'deepl': {\r\n      const deeplConfig = translator?.deepl || {}\r\n      return new DeepLTranslator({\r\n        apiKey: deeplConfig.apiKey || '',\r\n        apiUrl: deeplConfig.apiUrl,\r\n      })\r\n    }\r\n\r\n    case 'baidu': {\r\n      const baiduConfig = translator?.baidu || {}\r\n      return new BaiduTranslator({\r\n        appId: baiduConfig.appId || '',\r\n        secret: baiduConfig.secret || '',\r\n      })\r\n    }\r\n\r\n    default:\r\n      throw new Error(`Unsupported translation service: ${translateService}`)\r\n  }\r\n}\r\n\r\n/**\r\n * Translator Registry\r\n * Allows registering and creating translator instances\r\n */\r\nexport class TranslatorRegistry {\r\n  #translators = new Map<string, any>()\r\n\r\n  register(name: string, TranslatorClass: any) {\r\n    this.#translators.set(name, TranslatorClass)\r\n  }\r\n\r\n  create(name: string, config: any) {\r\n    const Class = this.#translators.get(name)\r\n    if (!Class) {\r\n      throw new Error(`Translator \"${name}\" not found in registry`)\r\n    }\r\n    return new Class(config)\r\n  }\r\n\r\n  list(): string[] {\r\n    return Array.from(this.#translators.keys())\r\n  }\r\n}\r\n\r\n// Create default registry and register built-in translators\r\nexport const defaultRegistry = new TranslatorRegistry()\r\n\r\n// Register built-in translators\r\ndefaultRegistry.register('google', GoogleTranslator)\r\ndefaultRegistry.register('openai', OpenAITranslator)\r\ndefaultRegistry.register('glm', GLMTranslator)\r\ndefaultRegistry.register('deepl', DeepLTranslator)\r\ndefaultRegistry.register('baidu', BaiduTranslator)\r\n"],"mappings":";;;;;;;;AAkBO,IAAe,iBAAf,MAA8B;AAAA,EAInC,YAAY,UAA6B,CAAC,GAAG;AAC3C,SAAK,UAAU;AAAA,MACb,YAAY;AAAA,MACZ,SAAS;AAAA,MACT,GAAG;AAAA,IACL;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAwBA,iBAAiB,UAA2B;AAC1C,WAAO,KAAK,mBAAmB,SAAS,QAAQ;AAAA,EAClD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUA,MAAM,eACJ,OACA,MACA,IACA,YAAoB,IACU;AAC9B,UAAM,UAA+B,CAAC;AAEtC,aAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK,WAAW;AAChD,YAAM,QAAQ,MAAM,MAAM,GAAG,IAAI,SAAS;AAE1C,UAAI;AACF,cAAM,aAAa,MAAM,KAAK,UAAU,OAAO,MAAM,EAAE;AAEvD,iBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,kBAAQ,KAAK;AAAA,YACX,UAAU,MAAM,CAAC;AAAA,YACjB,YAAY,WAAW,CAAC,KAAK,MAAM,CAAC;AAAA;AAAA,UACtC,CAAC;AAAA,QACH;AAAA,MACF,SAAS,OAAO;AAEd,mBAAW,QAAQ,OAAO;AACxB,kBAAQ,KAAK;AAAA,YACX,UAAU;AAAA,YACV,YAAY;AAAA,YACZ,OAAO,iBAAiB,QAAQ,MAAM,UAAU,OAAO,KAAK;AAAA,UAC9D,CAAC;AAAA,QACH;AAAA,MACF;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA,EAMU,MAAM,IAA2B;AACzC,WAAO,IAAI,QAAQ,aAAW,WAAW,SAAS,EAAE,CAAC;AAAA,EACvD;AACF;;;AC9FO,IAAM,mBAAN,cAA+B,eAAe;AAAA,EAyBnD,YAAY,UAAmC,CAAC,GAAG;AACjD,UAAM,OAAO;AAzBf,SAAU,qBAAqB,CAAC,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,OAAO;AAGxH,SAAQ,UAAU;AAGlB;AAAA,SAAQ,kBAA0C;AAAA,MAChD,SAAS;AAAA,MACT,SAAS;AAAA,MACT,SAAS;AAAA,MACT,SAAS;AAAA,MACT,SAAS;AAAA,MACT,SAAS;AAAA,MACT,SAAS;AAAA,MACT,SAAS;AAAA,MACT,SAAS;AAAA,MACT,SAAS;AAAA,MACT,SAAS;AAAA,MACT,MAAM;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,IACR;AAIE,SAAK,UAAU;AAAA,MACb,YAAY,CAAC,QAAQ;AAAA,MACrB,GAAG;AAAA,IACL;AAAA,EACF;AAAA,EAEA,eAAe,SAA2C;AACxD,QAAI,CAAC,QAAQ,cAAc,CAAC,QAAQ,QAAQ;AAC1C,YAAM,IAAI,MAAM,2DAA2D;AAAA,IAC7E;AACA,WAAO;AAAA,EACT;AAAA,EAEA,MAAM,UAAU,OAAiB,MAAc,IAA+B;AAC5E,QAAI,MAAM,WAAW,GAAG;AACtB,aAAO,CAAC;AAAA,IACV;AAEA,QAAI,KAAK,QAAQ,YAAY;AAC3B,aAAO,KAAK,qBAAqB,OAAO,MAAM,EAAE;AAAA,IAClD,OAAO;AACL,aAAO,KAAK,iBAAiB,OAAO,MAAM,EAAE;AAAA,IAC9C;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKQ,aAAa,MAAsB;AACzC,WAAO,KAAK,gBAAgB,IAAI,KAAK,KAAK,MAAM,GAAG,EAAE,CAAC;AAAA,EACxD;AAAA;AAAA;AAAA;AAAA,EAKA,MAAc,iBAAiB,OAAiB,MAAc,IAA+B;AAC3F,UAAM,aAAa,KAAK,aAAa,IAAI;AACzC,UAAM,WAAW,KAAK,aAAa,EAAE;AAErC,UAAM,YAAY;AAClB,UAAM,UAAoB,CAAC;AAE3B,aAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK,WAAW;AAChD,YAAM,QAAQ,MAAM,MAAM,GAAG,KAAK,IAAI,IAAI,WAAW,MAAM,MAAM,CAAC;AAElE,YAAM,WAAW,MAAM,MAAM,GAAG,KAAK,OAAO,QAAQ,KAAK,QAAQ,MAAM,IAAI;AAAA,QACzE,QAAQ;AAAA,QACR,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,QAC9C,MAAM,KAAK,UAAU;AAAA,UACnB,GAAG;AAAA,UACH,QAAQ;AAAA,UACR,QAAQ;AAAA,UACR,QAAQ;AAAA,QACV,CAAC;AAAA,MACH,CAAC;AAED,UAAI,CAAC,SAAS,IAAI;AAChB,cAAM,YAAY,MAAM,SAAS,KAAK;AACtC,cAAM,IAAI,MAAM,qBAAqB,SAAS,MAAM,IAAI,SAAS,UAAU,MAAM,SAAS,EAAE;AAAA,MAC9F;AAEA,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,UAAI,KAAK,OAAO;AACd,cAAM,IAAI,MAAM,qBAAqB,KAAK,MAAM,WAAW,KAAK,UAAU,KAAK,KAAK,CAAC,EAAE;AAAA,MACzF;AAEA,YAAM,eAAe,KAAK,MAAM,gBAAgB,CAAC;AACjD,cAAQ,KAAK,GAAG,aAAa,IAAI,CAAC,MAAW,EAAE,cAAc,CAAC;AAAA,IAChE;AAEA,WAAO;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKA,MAAc,qBAAqB,OAAiB,MAAc,IAA+B;AAC/F,UAAM,aAAa,KAAK,aAAa,IAAI;AACzC,UAAM,WAAW,KAAK,aAAa,EAAE;AAErC,UAAM,cAAc;AACpB,UAAM,sBAAsB;AAE5B,UAAM,UAAoB,CAAC;AAC3B,UAAM,SAAiD,CAAC;AAExD,YAAQ,IAAI,yEAAqB,WAAW,GAAG;AAG/C,aAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK,aAAa;AAClD,YAAM,QAAQ,MAAM,MAAM,GAAG,KAAK,IAAI,IAAI,aAAa,MAAM,MAAM,CAAC;AACpE,YAAM,cAAc,KAAK,MAAM,IAAI,WAAW,IAAI;AAClD,YAAM,eAAe,KAAK,KAAK,MAAM,SAAS,WAAW;AAEzD,cAAQ,IAAI,mBAAS,WAAW,IAAI,YAAY,0CAAY,MAAM,MAAM,wBAAS;AAGjF,YAAM,gBAAgB,MAAM;AAAA,QAAI,CAAC,MAAM,UACrC,KAAK,2BAA2B,MAAM,YAAY,QAAQ,EACvD,KAAK,aAAW,EAAE,SAAS,MAAe,QAAQ,KAAK,EAAE,EACzD,MAAM,YAAU;AAAA,UACf,SAAS;AAAA,UACT,QAAQ;AAAA;AAAA,UACR;AAAA,UACA,OAAO,iBAAiB,QAAQ,MAAM,UAAU,OAAO,KAAK;AAAA,QAC9D,EAAE;AAAA,MACN;AAEA,YAAM,eAAe,MAAM,QAAQ,IAAI,aAAa;AAGpD,iBAAW,QAAQ,cAAc;AAC/B,YAAI,KAAK,SAAS;AAChB,kBAAQ,KAAK,KAAK,MAAM;AAAA,QAC1B,OAAO;AACL,iBAAO,KAAK,EAAE,MAAM,KAAK,MAAM,OAAO,KAAK,MAAM,CAAC;AAClD,kBAAQ,KAAK,KAAK,MAAM;AAAA,QAC1B;AAAA,MACF;AAGA,UAAI,IAAI,cAAc,MAAM,QAAQ;AAClC,cAAM,KAAK,MAAM,mBAAmB;AAAA,MACtC;AAAA,IACF;AAEA,QAAI,OAAO,SAAS,GAAG;AACrB,cAAQ,KAAK;AAAA,gBAAS,OAAO,MAAM,iFAAgB;AACnD,aAAO,QAAQ,CAAC,EAAE,MAAM,MAAM,MAAM;AAClC,gBAAQ,KAAK,QAAQ,IAAI,MAAM,KAAK,EAAE;AAAA,MACxC,CAAC;AAAA,IACH;AAEA,WAAO;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKA,MAAc,2BAA2B,MAAc,MAAc,IAA6B;AAChG,UAAM,MAAM,qEAAqE,IAAI,OAAO,EAAE,WAAW,mBAAmB,IAAI,CAAC;AAEjI,UAAM,WAAW,MAAM,MAAM,KAAK;AAAA,MAChC,QAAQ,YAAY,QAAQ,GAAK;AAAA,IACnC,CAAC;AAED,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,QAAQ,SAAS,MAAM,EAAE;AAAA,IAC3C;AAEA,UAAM,OAAO,MAAM,SAAS,KAAK;AACjC,UAAM,aAAa,KAAK,CAAC,GAAG,IAAI,CAAC,SAAc,KAAK,CAAC,CAAC,EAAE,KAAK,EAAE,KAAK;AACpE,WAAO;AAAA,EACT;AAAA,EAEU,MAAM,IAA2B;AACzC,WAAO,IAAI,QAAQ,aAAW,WAAW,SAAS,EAAE,CAAC;AAAA,EACvD;AACF;;;ACxLO,IAAM,mBAAN,cAA+B,eAAe;AAAA,EAInD,YAAY,SAAkC;AAC5C,UAAM,OAAO;AAJf,SAAU,qBAAqB,CAAC,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,OAAO;AAKpG,SAAK,UAAU;AAAA,MACb,OAAO;AAAA,MACP,SAAS;AAAA,MACT,GAAG;AAAA,IACL;AAAA,EACF;AAAA,EAEQ,aAAqB;AAC3B,WAAO,KAAK,QAAQ,WAAW;AAAA,EACjC;AAAA,EAEA,eAAe,SAA2C;AACxD,QAAI,CAAC,QAAQ,QAAQ;AACnB,YAAM,IAAI,MAAM,yBAAyB;AAAA,IAC3C;AACA,WAAO;AAAA,EACT;AAAA,EAEA,MAAM,UAAU,OAAiB,MAAc,IAA+B;AAC5E,UAAM,YAAY;AAClB,UAAM,UAAoB,CAAC;AAE3B,aAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK,WAAW;AAChD,YAAM,QAAQ,MAAM,MAAM,GAAG,IAAI,SAAS;AAE1C,UAAI;AACF,cAAM,SAAS,KAAK,YAAY,OAAO,MAAM,EAAE;AAE/C,cAAM,WAAW,MAAM,MAAM,KAAK,WAAW,GAAG;AAAA,UAC9C,QAAQ;AAAA,UACR,SAAS;AAAA,YACP,iBAAiB,UAAU,KAAK,QAAQ,MAAM;AAAA,YAC9C,gBAAgB;AAAA,UAClB;AAAA,UACA,MAAM,KAAK,UAAU;AAAA,YACnB,OAAO,KAAK,QAAQ;AAAA,YACpB,UAAU;AAAA,cACR;AAAA,gBACE,MAAM;AAAA,gBACN,SAAS;AAAA,cACX;AAAA,cACA;AAAA,gBACE,MAAM;AAAA,gBACN,SAAS;AAAA,cACX;AAAA,YACF;AAAA,YACA,aAAa;AAAA,UACf,CAAC;AAAA,QACH,CAAC;AAED,cAAM,OAAO,MAAM,SAAS,KAAK;AACjC,cAAM,aAAa,KAAK,QAAQ,CAAC,GAAG,SAAS,WAAW;AACxD,cAAM,eAAe,WAAW,MAAM,IAAI,EAAE,OAAO,CAAC,MAAc,EAAE,KAAK,CAAC;AAE1E,gBAAQ,KAAK,GAAG,YAAY;AAAA,MAE9B,SAAS,OAAO;AACd,gBAAQ,KAAK,8BAA8B,KAAK;AAChD,gBAAQ,KAAK,GAAG,KAAK;AAAA,MACvB;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAAA,EAEQ,YAAY,OAAiB,MAAc,IAAoB;AACrE,UAAM,YAAoC;AAAA,MACxC,SAAS;AAAA,MACT,SAAS;AAAA,MACT,SAAS;AAAA,MACT,SAAS;AAAA,MACT,SAAS;AAAA,MACT,SAAS;AAAA,MACT,SAAS;AAAA,MACT,SAAS;AAAA,IACX;AAEA,UAAM,aAAa,UAAU,IAAI,KAAK;AACtC,UAAM,aAAa,UAAU,EAAE,KAAK;AAEpC,UAAM,WAAW,MAAM,IAAI,CAAC,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,IAAI,EAAE,EAAE,KAAK,IAAI;AAEtE,WAAO,kCAAkC,UAAU,eAAe,UAAU;AAAA;AAAA,EAAyC,QAAQ;AAAA,EAC/H;AACF;;;AC3FO,IAAM,kBAAN,cAA8B,eAAe;AAAA,EAIlD,YAAY,SAAiC;AAC3C,UAAM,OAAO;AAJf,SAAU,qBAAqB,CAAC,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,OAAO;AAKpG,SAAK,UAAU;AAAA,MACb,QAAQ;AAAA,MACR,GAAG;AAAA,IACL;AAAA,EACF;AAAA,EAEQ,YAAoB;AAC1B,WAAO,KAAK,QAAQ,UAAU;AAAA,EAChC;AAAA,EAEA,eAAe,SAA0C;AACvD,QAAI,CAAC,QAAQ,QAAQ;AACnB,YAAM,IAAI,MAAM,wBAAwB;AAAA,IAC1C;AACA,WAAO;AAAA,EACT;AAAA,EAEA,MAAM,UAAU,OAAiB,MAAc,IAA+B;AAE5E,UAAM,UAAoB,CAAC;AAG3B,UAAM,YAAY;AAClB,aAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK,WAAW;AAChD,YAAM,QAAQ,MAAM,MAAM,GAAG,IAAI,SAAS;AAE1C,UAAI;AACF,cAAM,WAAW,MAAM,MAAM,KAAK,UAAU,GAAG;AAAA,UAC7C,QAAQ;AAAA,UACR,SAAS;AAAA,YACP,iBAAiB,kBAAkB,KAAK,QAAQ,MAAM;AAAA,YACtD,gBAAgB;AAAA,UAClB;AAAA,UACA,MAAM,KAAK,UAAU;AAAA,YACnB,MAAM;AAAA,YACN,aAAa,KAAK,YAAY,EAAE,QAAQ,KAAK,GAAG;AAAA,YAChD,aAAa,GAAG,YAAY,EAAE,QAAQ,KAAK,GAAG;AAAA,UAChD,CAAC;AAAA,QACH,CAAC;AAED,cAAM,OAAO,MAAM,SAAS,KAAK;AACjC,cAAM,eAAe,KAAK,aAAa,IAAI,CAAC,MAAM,EAAE,IAAI;AACxD,gBAAQ,KAAK,GAAG,YAAY;AAAA,MAE9B,SAAS,OAAO;AACd,gBAAQ,KAAK,6BAA6B,KAAK;AAE/C,gBAAQ,KAAK,GAAG,KAAK;AAAA,MACvB;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AACF;;;AClEA,SAAS,kBAAkB;AAQpB,IAAM,kBAAN,cAA8B,eAAe;AAAA,EAKlD,YAAY,SAAiC;AAC3C,UAAM,OAAO;AALf,SAAU,qBAAqB,CAAC,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,OAAO;AAEtG,SAAQ,UAAU;AAIhB,SAAK,UAAU;AAAA,EACjB;AAAA,EAEA,eAAe,SAA0C;AACvD,QAAI,CAAC,QAAQ,SAAS,CAAC,QAAQ,QAAQ;AACrC,YAAM,IAAI,MAAM,4CAA4C;AAAA,IAC9D;AACA,WAAO;AAAA,EACT;AAAA,EAEA,MAAM,UAAU,OAAiB,MAAc,IAA+B;AAC5E,UAAM,UAAoB,CAAC;AAE3B,eAAW,QAAQ,OAAO;AACxB,UAAI;AACF,cAAM,OAAO,KAAK,IAAI;AACtB,cAAM,OAAO,KAAK,aAAa,MAAM,IAAI;AAEzC,cAAM,MAAM,GAAG,KAAK,OAAO,MAAM,mBAAmB,IAAI,CAAC,SAAS,IAAI,OAAO,EAAE,UAAU,KAAK,QAAQ,KAAK,SAAS,IAAI,SAAS,IAAI;AAErI,cAAM,WAAW,MAAM,MAAM,GAAG;AAChC,cAAM,OAAO,MAAM,SAAS,KAAK;AAMjC,YAAI,KAAK,eAAe,SAAS,KAAK,eAAe,SAAS;AAC5D,kBAAQ,KAAK,KAAK,eAAe,CAAC,GAAG,OAAO,IAAI;AAAA,QAClD,OAAO;AACL,kBAAQ,KAAK,6BAA6B,IAAI;AAC9C,kBAAQ,KAAK,IAAI;AAAA,QACnB;AAAA,MACF,SAAS,OAAO;AACd,gBAAQ,KAAK,4BAA4B,KAAK;AAC9C,gBAAQ,KAAK,IAAI;AAAA,MACnB;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAAA,EAEQ,aAAa,MAAc,MAAsB;AAEvD,UAAM,MAAM,KAAK,QAAQ,QAAQ,OAAO,OAAO,KAAK,QAAQ;AAC5D,WAAO,WAAW,KAAK,EAAE,OAAO,GAAG,EAAE,OAAO,KAAK;AAAA,EACnD;AACF;;;ACzDO,IAAM,mBAAN,cAA+B,MAAM;AAAA,EAG1C,YAAY,SAAiB,UAAkD;AAC7E,UAAM,OAAO;AACb,SAAK,OAAO;AACZ,SAAK,WAAW;AAAA,EAClB;AACF;AAQO,IAAM,gBAAN,cAA4B,eAAe;AAAA,EAIhD,YAAY,SAA+B;AACzC,UAAM,OAAO;AAJf,SAAU,qBAAqB,CAAC,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,OAAO;AAKpG,SAAK,UAAU;AAAA,MACb,OAAO;AAAA,MACP,SAAS;AAAA,MACT,GAAG;AAAA,IACL;AAAA,EACF;AAAA,EAEA,eAAe,SAAwC;AACrD,QAAI,CAAC,QAAQ,QAAQ;AACnB,YAAM,IAAI,MAAM,iCAAiC;AAAA,IACnD;AACA,WAAO;AAAA,EACT;AAAA,EAEA,MAAM,UAAU,OAAiB,MAAc,IAA+B;AAC5E,SAAK,eAAe,KAAK,OAAO;AAEhC,QAAI,MAAM,WAAW,GAAG;AACtB,aAAO,CAAC;AAAA,IACV;AAGA,UAAM,YAAY;AAClB,UAAM,UAAoB,CAAC;AAC3B,UAAM,SAAiD,CAAC;AAGxD,aAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK,WAAW;AAChD,YAAM,QAAQ,MAAM,MAAM,GAAG,KAAK,IAAI,IAAI,WAAW,MAAM,MAAM,CAAC;AAClE,YAAM,cAAc,KAAK,MAAM,IAAI,SAAS,IAAI;AAChD,YAAM,eAAe,KAAK,KAAK,MAAM,SAAS,SAAS;AAEvD,UAAI;AACF,gBAAQ,IAAI,mBAAS,WAAW,IAAI,YAAY,8BAAU,MAAM,MAAM,wBAAS;AAC/E,cAAM,eAAe,MAAM,KAAK,eAAe,OAAO,MAAM,EAAE;AAC9D,gBAAQ,KAAK,GAAG,YAAY;AAAA,MAC9B,SAAS,OAAO;AAEd,gBAAQ,IAAI,mBAAS,WAAW,2FAAqB;AACrD,mBAAW,QAAQ,OAAO;AACxB,cAAI;AACF,kBAAM,cAAc,MAAM,KAAK,gBAAgB,MAAM,MAAM,EAAE;AAC7D,oBAAQ,KAAK,WAAW;AAAA,UAC1B,SAAS,aAAa;AACpB,kBAAM,eAAe,uBAAuB,QAAQ,YAAY,UAAU,OAAO,WAAW;AAC5F,mBAAO,KAAK,EAAE,MAAM,OAAO,aAAa,CAAC;AACzC,oBAAQ,KAAK,IAAI;AAAA,UACnB;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAGA,QAAI,OAAO,SAAS,GAAG;AACrB,YAAM,QAAQ,IAAI,iBAAiB,kCAAkC,MAAM;AAC3E,YAAM;AAAA,IACR;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,MAAc,eAAe,OAAiB,MAAc,IAA+B;AAEzF,UAAM,QAAQ,MAAM,IAAI,CAAC,MAAM,UAAU,GAAG,QAAQ,CAAC,KAAK,IAAI,EAAE,EAAE,KAAK,IAAI;AAC3E,UAAM,SAAS,2BAAO,KAAK,gBAAgB,IAAI,CAAC,qBAAM,KAAK,gBAAgB,EAAE,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMhF,KAAK;AAEH,UAAM,WAAW,MAAM,MAAM,KAAK,QAAQ,SAAU;AAAA,MAClD,QAAQ;AAAA,MACR,SAAS;AAAA,QACP,gBAAgB;AAAA,QAChB,iBAAiB,UAAU,KAAK,QAAQ,MAAM;AAAA,MAChD;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACnB,OAAO,KAAK,QAAQ;AAAA,QACpB,UAAU;AAAA,UACR;AAAA,YACE,MAAM;AAAA,YACN,SAAS;AAAA,UACX;AAAA,QACF;AAAA,QACA,aAAa;AAAA,QACb,OAAO;AAAA,QACP,QAAQ;AAAA,MACV,CAAC;AAAA,IACH,CAAC;AAED,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,YAAY,MAAM,SAAS,KAAK;AACtC,YAAM,IAAI,MAAM,kBAAkB,SAAS,MAAM,IAAI,SAAS,UAAU,MAAM,SAAS,EAAE;AAAA,IAC3F;AAEA,UAAM,OAAO,MAAM,SAAS,KAAK;AAEjC,QAAI,KAAK,OAAO;AACd,YAAM,IAAI,MAAM,kBAAkB,KAAK,MAAM,WAAW,KAAK,UAAU,KAAK,KAAK,CAAC,EAAE;AAAA,IACtF;AAEA,UAAM,UAAU,KAAK,UAAU,CAAC,GAAG,SAAS,WAAW;AAGvD,QAAI;AACF,YAAM,YAAY,QAAQ,MAAM,aAAa;AAC7C,UAAI,CAAC,WAAW;AACd,cAAM,IAAI,MAAM,2BAA2B;AAAA,MAC7C;AAEA,YAAM,SAAS,KAAK,MAAM,UAAU,CAAC,CAAC;AACtC,YAAM,eAAe,OAAO,gBAAgB,CAAC;AAE7C,UAAI,aAAa,WAAW,MAAM,QAAQ;AACxC,cAAM,IAAI,MAAM,YAAY,MAAM,MAAM,sBAAsB,aAAa,MAAM,EAAE;AAAA,MACrF;AAEA,aAAO;AAAA,IACT,SAAS,OAAO;AAEd,YAAM,IAAI,MAAM,+CAA+C,iBAAiB,QAAQ,MAAM,UAAU,OAAO,KAAK,CAAC,EAAE;AAAA,IACzH;AAAA,EACF;AAAA,EAEA,MAAc,gBAAgB,MAAc,MAAc,IAA6B;AACrF,UAAM,SAAS,2BAAO,KAAK,gBAAgB,IAAI,CAAC,qBAAM,KAAK,gBAAgB,EAAE,CAAC;AAAA;AAAA,EAAwB,IAAI;AAE1G,UAAM,WAAW,MAAM,MAAM,KAAK,QAAQ,SAAU;AAAA,MAClD,QAAQ;AAAA,MACR,SAAS;AAAA,QACP,gBAAgB;AAAA,QAChB,iBAAiB,UAAU,KAAK,QAAQ,MAAM;AAAA,MAChD;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACnB,OAAO,KAAK,QAAQ;AAAA,QACpB,UAAU;AAAA,UACR;AAAA,YACE,MAAM;AAAA,YACN,SAAS;AAAA,UACX;AAAA,QACF;AAAA,QACA,aAAa;AAAA,QACb,OAAO;AAAA,QACP,QAAQ;AAAA,MACV,CAAC;AAAA,IACH,CAAC;AAED,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,YAAY,MAAM,SAAS,KAAK;AACtC,YAAM,IAAI,MAAM,kBAAkB,SAAS,MAAM,IAAI,SAAS,UAAU,MAAM,SAAS,EAAE;AAAA,IAC3F;AAEA,UAAM,OAAO,MAAM,SAAS,KAAK;AAEjC,QAAI,KAAK,OAAO;AACd,YAAM,IAAI,MAAM,kBAAkB,KAAK,MAAM,WAAW,KAAK,UAAU,KAAK,KAAK,CAAC,EAAE;AAAA,IACtF;AAEA,UAAM,UAAU,KAAK,UAAU,CAAC,GAAG,SAAS,WAAW;AACvD,WAAO,QAAQ,KAAK;AAAA,EACtB;AAAA,EAEQ,gBAAgB,MAAsB;AAC5C,UAAM,QAAgC;AAAA,MACpC,SAAS;AAAA,MACT,SAAS;AAAA,MACT,SAAS;AAAA,MACT,SAAS;AAAA,IACX;AACA,WAAO,MAAM,IAAI,KAAK;AAAA,EACxB;AAAA,EAKU,MAAM,IAA2B;AACzC,WAAO,IAAI,QAAQ,aAAW,WAAW,SAAS,EAAE,CAAC;AAAA,EACvD;AACF;;;AC5LO,SAAS,2BAA2B,QAAoC;AAC7E,QAAM,EAAE,kBAAkB,WAAW,IAAI;AAEzC,UAAQ,kBAAkB;AAAA,IACxB,KAAK,UAAU;AACb,YAAM,eAAe,YAAY,UAAU,EAAE,YAAY,KAAK;AAC9D,aAAO,IAAI,iBAAiB;AAAA,QAC1B,QAAQ,aAAa,UAAU;AAAA,QAC/B,YAAY,aAAa,cAAc;AAAA,MACzC,CAAC;AAAA,IACH;AAAA,IAEA,KAAK,UAAU;AACb,YAAM,eAAe,YAAY,UAAU,CAAC;AAC5C,aAAO,IAAI,iBAAiB;AAAA,QAC1B,QAAQ,aAAa,UAAU;AAAA,QAC/B,OAAO,aAAa;AAAA,QACpB,SAAS,aAAa;AAAA,MACxB,CAAC;AAAA,IACH;AAAA,IAEA,KAAK,OAAO;AACV,YAAM,YAAY,YAAY,OAAO,CAAC;AACtC,aAAO,IAAI,cAAc;AAAA,QACvB,QAAQ,UAAU,UAAU;AAAA,QAC5B,OAAO,UAAU;AAAA,QACjB,SAAS,UAAU;AAAA,MACrB,CAAC;AAAA,IACH;AAAA,IAEA,KAAK,SAAS;AACZ,YAAM,cAAc,YAAY,SAAS,CAAC;AAC1C,aAAO,IAAI,gBAAgB;AAAA,QACzB,QAAQ,YAAY,UAAU;AAAA,QAC9B,QAAQ,YAAY;AAAA,MACtB,CAAC;AAAA,IACH;AAAA,IAEA,KAAK,SAAS;AACZ,YAAM,cAAc,YAAY,SAAS,CAAC;AAC1C,aAAO,IAAI,gBAAgB;AAAA,QACzB,OAAO,YAAY,SAAS;AAAA,QAC5B,QAAQ,YAAY,UAAU;AAAA,MAChC,CAAC;AAAA,IACH;AAAA,IAEA;AACE,YAAM,IAAI,MAAM,oCAAoC,gBAAgB,EAAE;AAAA,EAC1E;AACF;AAzEA;AA+EO,IAAM,qBAAN,MAAyB;AAAA,EAAzB;AACL,qCAAe,oBAAI,IAAiB;AAAA;AAAA,EAEpC,SAAS,MAAc,iBAAsB;AAC3C,uBAAK,cAAa,IAAI,MAAM,eAAe;AAAA,EAC7C;AAAA,EAEA,OAAO,MAAc,QAAa;AAChC,UAAM,QAAQ,mBAAK,cAAa,IAAI,IAAI;AACxC,QAAI,CAAC,OAAO;AACV,YAAM,IAAI,MAAM,eAAe,IAAI,yBAAyB;AAAA,IAC9D;AACA,WAAO,IAAI,MAAM,MAAM;AAAA,EACzB;AAAA,EAEA,OAAiB;AACf,WAAO,MAAM,KAAK,mBAAK,cAAa,KAAK,CAAC;AAAA,EAC5C;AACF;AAjBE;AAoBK,IAAM,kBAAkB,IAAI,mBAAmB;AAGtD,gBAAgB,SAAS,UAAU,gBAAgB;AACnD,gBAAgB,SAAS,UAAU,gBAAgB;AACnD,gBAAgB,SAAS,OAAO,aAAa;AAC7C,gBAAgB,SAAS,SAAS,eAAe;AACjD,gBAAgB,SAAS,SAAS,eAAe;","names":[]}