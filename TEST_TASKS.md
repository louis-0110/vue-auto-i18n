# Vue Auto I18n 核心功能测试任务列表

> 测试重点：插件和工具的功能，不关注测试项目的业务逻辑

## 任务列表

### 阶段一：中文提取功能测试

- [x] **任务 1.1**: 测试 Vue 单文件组件模板中文提取 ✅
  - ✅ 测试简单的中文文本提取（4 个测试用例）
  - ✅ 测试包含中文的属性值提取（3 个测试用例）
  - ✅ 测试嵌套标签中的中文提取（3 个测试用例）
  - ✅ 测试边界情况（6 个测试用例）
  - **结果**: 16/16 测试通过，测试文件：[vue-extractor.test.ts](packages/core/src/extractors/vue-extractor.test.ts)

- [x] **任务 1.2**: 测试 Vue 单文件组件脚本中文提取 ✅
  - ✅ 测试字符串字面量中的中文（4 个测试用例）
  - ✅ 测试模板字符串中的中文（3 个测试用例）
  - ✅ 测试变量赋值中的中文（6 个测试用例）
  - ✅ 测试脚本边界情况（4 个测试用例）
  - **结果**: 17/17 测试通过，总计 33/33 测试通过，测试文件：[vue-extractor.test.ts](packages/core/src/extractors/vue-extractor.test.ts)

- [x] **任务 1.3**: 测试 JS/TS 文件中文提取 ✅
  - ✅ 测试对象属性中的中文（4 个测试用例）
  - ✅ 测试函数调用参数中的中文（4 个测试用例）
  - ✅ 测试复杂表达式中的中文（5 个测试用例）
  - ✅ 测试 TypeScript 特性（3 个测试用例）
  - ✅ 测试 JSX/TSX 文件（3 个测试用例）
  - ✅ 测试边界情况（5 个测试用例）
  - ✅ 测试行号和列号追踪（2 个测试用例）
  - **结果**: 26/26 测试通过，测试文件：[js-extractor.test.ts](packages/core/src/extractors/js-extractor.test.ts)

- [x] **任务 1.4**: 测试边界情况 ✅
  - ✅ 空字符串处理（已在 vue-extractor 和 js-extractor 测试中覆盖）
  - ✅ 混合中英文文本（已在之前的测试中覆盖）
  - ✅ 特殊字符和表情符号（已在之前的测试中覆盖）
  - ✅ 已有的 `$t()` 调用应该被跳过（已在之前的测试中覆盖）
  - **结果**: 边界情况已在现有测试中充分覆盖，无需额外测试

### 阶段二：翻译功能测试

- [ ] **任务 2.1**: 测试 Google 翻译器
  - 测试单个文本翻译
  - 测试批量文本翻译
  - 测试错误处理（网络错误、API 限制）

- [ ] **任务 2.2**: 测试 OpenAI 翻译器
  - 测试 API 调用
  - 测试模型参数配置
  - 测试流式响应（如果支持）

- [ ] **任务 2.3**: 测试语言包生成
  - 测试 JSON 格式输出
  - 测试多语言文件生成（en-US, ja-JP 等）
  - 测试增量翻译（只翻译新文本）

### 阶段三：Vite 插件转换功能测试（核心重点）

- [ ] **任务 3.1**: 测试构建时代码转换
  - 测试模板中文转换为 `{{ $t('key') }}`
  - 测试属性值转换为 `:attr="$t('key')"`
  - 验证源文件不被修改

- [ ] **任务 3.2**: 测试语言包加载
  - 测试 zh-CN.json 加载
  - 测试语言包缓存机制
  - 测试语言包热更新（开发模式）

- [ ] **任务 3.3**: 测试零侵入性
  - 验证转换只发生在构建产物中
  - 验证源代码保持不变
  - 测试多次构建的一致性

- [ ] **任务 3.4**: 测试 AST 转换正确性
  - 测试文本节点转换（type === 2）
  - 测试属性节点转换（type === 6）
  - 测试元素节点递归转换（type === 1）

### 阶段四：集成测试

- [ ] **任务 4.1**: 端到端流程测试
  - 完整流程：提取 → 翻译 → 转换
  - 测试 CLI 工具集成
  - 测试 Vite 插件集成

- [ ] **任务 4.2**: 性能测试
  - 测试大文件处理性能
  - 测试缓存效率
  - 测试并发翻译性能

### 阶段五：错误处理和边界情况

- [ ] **任务 5.1**: 测试错误处理
  - API 调用失败处理
  - 文件读取错误处理
  - AST 解析错误处理

- [ ] **任务 5.2**: 测试边界情况
  - 空语言包
  - 无效的中文文本
  - 超长文本处理

---

## 当前状态

**✅ 阶段一：中文提取功能测试 - 全部完成！**
**准备开始执行任务 2.1**

## 进度追踪

- 阶段一：中文提取功能测试 - 4/4 完成 ✅
- 阶段二：翻译功能测试 - 0/3 完成
- 阶段二：翻译功能测试 - 0/3 完成
- 阶段三：Vite 插件转换功能测试 - 0/4 完成 ⭐ 核心重点
- 阶段四：集成测试 - 0/2 完成
- 阶段五：错误处理和边界情况 - 0/2 完成

---

**最后更新**: 2025-02-05
